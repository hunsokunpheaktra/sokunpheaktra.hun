<apex:page controller="P2P_MySupportController" standardStylesheets="false" showHeader="false" sidebar="false">
    <html>
          <head>
                <style>
                    .cancelIcon{
                        background: url("{!URLFOR($Resource.P2P_Resources, 'img/cancel.png')}") no-repeat scroll right center transparent !important;
                        padding-right: 25px;
                        font-weight: bold;
                        float:right;
                        color: #F47421;
                    }
                    
                    .align-checkbox-upload{
                        clear: left;
                        float: left;
                        margin-top: 10px;
                    }
                    .align-label-upload{
                        float: left;
                        margin-top: 10px;
                        padding-left: 15px;
                        padding-top: 5px;
                    }
                    .wrapTab{
                       margin-top: 15px;
                    }
                    .wrapBtnTop{
                        background-color: #fff;
                        float: left;
                        padding: 15px;
                        width: 100%;
                        border-radius: 0 0 5px 5px;
                    }
                  
                    .wrapChartSignal{
                        border-bottom: 1px solid #cdcdcd;
                        float: left;
                        width: 100%;
                    }
                    
                    .paddingBtn{
                        padding-right: 10px;
                        font-size: 22px;
                    }
                    .btnExportPdf{
                        background-color: #ddd;
                        border-radius: 3px;
                        box-shadow: 0 3px 2px -1px #666666;
                        color: #333;
                        cursor: pointer;
                        float: left;
                        margin-bottom: 3px;
                        margin-left: 15px;
                        margin-top: 3px;
                        padding: 4px 10px;
                        text-decoration: none !important;
                    }
                    
                    .myBtn{
                        background-color: #ddd;
                        border-radius: 3px;
                        box-shadow: 0 3px 2px -1px #666666;
                        color: #333;
                        cursor: pointer;
                        float: left;
                        margin-bottom: 3px;
                        margin-top: 3px;
                        padding: 4px 15px;
                        text-decoration: none !important;
                        font-family: "SourceSansPro Bold";
                    }
                    
                    .nav-tabs > li.active > a, .nav-tabs > li.active > a:hover, .nav-tabs > li.active > a:focus{
                        border: 0;
                        padding-bottom: 10px;
                        background-image: none;
                        background-color: #fff !important;
                    }
                    
                    .nav-tabs > li > a{
                        width: 130px;
                    }
                   
                    .nav > li > a:hover, .nav > li > a:focus{
                        border-right: 0;
                        border-top: 0;
                        border-left: 0;
                        outline: none;
                        border-bottom: 0;
                    }
                    
                  
                    .wrapTitleChart{
                        background-color: #fff;
                        border-radius: 5px;
                        float: left;
                        margin-top: 15px;
                        padding: 15px;
                        width: 100%;
                        min-height: 370px;
                    }
                    
                    .clearPadding{
                        padding-left: 0;
                        padding-right: 0;
                    }
                    input[type="radio"]{
                        display: none;
                    }
                    input[type="radio"] + label{
                        background: url("{!URLFOR($Resource.P2P_Touchpunch, 'radio.png')}") no-repeat scroll right -1px transparent;
                        height: 28px;
                        cursor: pointer;
                        padding-right: 40px;
                        font-weight: normal;
                        padding-top: 2px;
                    }
                    input[type="radio"]:checked + label{
                        background: url("{!URLFOR($Resource.P2P_Touchpunch, 'radio_selected.png')}") no-repeat scroll right -1px transparent;
                    }
                    
                    .hideAllSize{
                        display: none;
                    }
                    
                    
                    .vbox-inline{
                        width: 100% !important;
                    }
                    .vbox-title{
                        font-size: 23px;
                    }
                    .spacingTop{
                        margin-top: 15px;
                    }
                    .spacingLgTop{
                        float: left;
                        margin-top: 30px;
                        width: 100%;
                    }
                    
                    .clearMe{
                        float: left;
                        width: 100%;
                        clear: both;
                    }
                    .glyphicon{
                        top: 2px;
                        font-size: 14px;
                    }
                    .paddingTop{
                        padding-top: 15px;
                    }
                    
                    .paddingLeft{
                        padding-left: 15px;
                    }
                    .paddingRight{
                        padding-right: 15px;
                    }
                    .fullWidth{
                        width: 100%;
                        float: left;
                    }
                    .btnSave{
                        border-radius: 3px;
                        border: none;
                        box-shadow: 0 3px 2px -1px #666666;
                        color: #fff !important;
                        cursor: pointer;
                        float: right;
                        font-size: 16px;
                        line-height: 16px;
                        margin-top: 10px;
                        padding: 5px 10px;
                        text-align: center;
                        width: 100%;
                        background: url("{!URLFOR($Resource.P2P_Resources, 'img/save_icon.png')}") no-repeat scroll 41% center transparent;
                        background-color: #f4731e;
                        height: 25px;
                        padding-left: 28px;
                    }
                    
                    .btnLiveChat{
                        /*background-image: url("{!URLFOR($Resource.P2P_ResMySupport, 'chat_icon.png')}");*/
                        background-repeat: no-repeat;
                        background-position: 23% center;
                    }
                    
                    .labelSearch{
                        float: left;
                        font-size: 18px;
                        padding-right: 15px;
                    }
                    .inputSearch{
                        width: 60%;
                        float: left;
                    }
                    .faq_col_left{
                        float: left;
                        padding-right: 15px;
                        width: 75%;
                    }
                    .faq_col_right{
                        float: left;
                        width: 25%;
                        border-bottom: 2px solid #acacac;
                        border-radius: 3px;
                    }
                    .wrapContentFaq{
                        float: left;
                        padding: 15px 0;
                        width: 100%;
                    }
                    .faqContent{
                        background-color: #fff;
                        border-radius: 5px;
                        float: left;
                        padding: 15px;
                        width: 100%;
                    }
                    .back,
                    .faqActionBack{
                        font-family: "SourceSansPro Bold";
                        font-size: 15px;
                        margin-bottom: 10px;
                        display: table;
                    }
                    .list_laq{
                        float: left;
                        width: 100%;
                        margin: 0;
                        padding: 0;
                        border-left: none;
                        font-size: 15px !important;
                    }
                    .list_laq li{
                        list-style: none;
                        margin-bottom: 15px;
                    }
                    .text_search{
                        color: #2a5db0;
                        margin-left: 5px;
                    }
                    .titleFaq{
                        font-size: 23px;
                        font-family: "SourceSansPro Light";
                    }
                    .labelTitleFaq{
                        color: #2a5db0;
                        font-family: "SourceSansPro Bold";
                    }
                    .labelTitleFaq a{
                        color: #2a5db0 !important;
                        font-family: "SourceSansPro Bold";
                    }
                    .teaserFaq{
                        font-size: 14px;
                    }
                    .wrapPagination{
                        float: left;
                    }
                    .wrapPaginationRight{
                        float: right;
                    }
                    .topFaq li{
                        border-bottom: 1px solid #cdcdcd;
                        margin-bottom: 0;
                        margin-top: 7px;
                        padding-bottom: 7px;
                    }
                    .topFaq li a{
                        color: #2a5db0;
                    }
                    .topFaq li:last-child{
                        border-bottom: none;
                        padding-bottom: 0;
                    }
                    .noPadding-left{
                        padding-left: 0;
                    }
                    .noPadding-right{
                        padding-right: 0;
                    }
                    .noPadding{
                        padding-left: 0;
                        padding-right: 0;
                    }
                    
                    
                    .iMarginTop{
                        margin-top: 10px;
                        display: block;
                        width: 100%;
                        float: left;
                    }
                    .firstCol{
                        width: 33.33%;
                        float: left;
                    }
                    .secondCol{
                        width: 33.33%;
                        float: left;
                    }
                    .thirdCol{
                        width: 33.33%;
                        float: left;
                        position: relative;
                    }
                    .phoneNumber{
                        background: url("{!URLFOR($Resource.P2P_ResMySupport, 'call_icon.png')}") no-repeat scroll left 9px transparent;
                        float: left;
                        font-family: "SourceSansPro Light";
                        font-size: 25px;
                        margin-right: 10px;
                        padding: 5px 0 0 30px;
                        width: 172px;
                    }
                    .timeToContact{
                        float: left;
                        font-size: 18px;
                        margin-left: 30px;
                        margin-top: 10px;
                        width: 126px;
                    }
                    .iRadius{
                        -webkit-border-radius: 5px;    
                        border-radius: 5px; 
                        -moz-border-radius:5px;
                        -khtml-border-radius:5px;
                    }
                    .iRadiusMini{
                        -webkit-border-radius: 3px;    
                        border-radius: 3px; 
                        -moz-border-radius:3px;
                        -khtml-border-radius:3px;
                    }
                    .wrapSelect .caseType{
                        width: 100%;
                        float: left;
                    }
                    .wrapSelect .topic{
                        width: 86%;
                        float: left;
                    }
                    .btnGo{
                         float: left;
                        margin-left: 2%;
                        margin-top: 10px;
                        padding-left: 0 !important;
                        padding-right: 0 !important;
                        text-align: center;
                        width: 12%;
                    }
                    .yourQuestion{
                        border: 2px solid #cfcece;
                        border-radius: 5px;
                        padding: 5px 10px;
                        width: 100%;
                        margin-top: 5px;
                    }
                    .wrapComponent input,
                    .wrapComponent textarea{
                        border: 2px solid #cfcece;
                        border-radius: 5px;
                        padding: 5px 10px;
                        width: 100%;
                        margin-top: 5px;
                    }
                    .detail{
                        border: 2px solid #cfcece;
                        border-radius: 5px;
                        padding: 5px 10px;
                        width: 100%;
                        margin-top: 5px;
                    }
                    .iClear{
                        clear: both;
                    }
                    .seperateCreateQuestion{
                        float: left;
                        width: 100%; 
                        height: 10px;
                        margin-top: 15px;
                        background-color: #FFFFFF;
                        background-image: -webkit-gradient(linear, left top, left bottom, from(#EEEEEE), to(#FFFFFF));
                        background-image: -webkit-linear-gradient(top, #EEEEEE, #FFFFFF);
                        background-image:    -moz-linear-gradient(top, #EEEEEE, #FFFFFF);
                        background-image:      -o-linear-gradient(top, #EEEEEE, #FFFFFF);
                        background-image:         linear-gradient(to bottom, #EEEEEE, #FFFFFF);
                        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#EEEEEE', endColorstr='#FFFFFF');
                    }
                    .uploadFile{
                        float: left;
                        margin-bottom: 5px;
                        margin-right: 10px;
                        margin-top: 9px;
                        padding-left: 30px;
                        padding-right: 30px;
                    }
                    .uploadInfo{
                        float: left;
                        margin-top: 7px;
                    }
                    .checkImageUpload{
                        float: left;
                        margin-right: 10px;
                        margin-top: 5px;
                    }
                    .clickToPopupImage{
                        float: left;
                        margin-top: 5px;
                        cursor: pointer;
                    }
                    .submitNewCase{
                        float: left;
                        padding-left: 0;
                        padding-right: 0;
                        width: 200px;
                        margin-right: 10px;
                    }
                    .required{
                        float: left;
                        margin-top: 7px;
                    }
                    .searchCase{
                        float: left;
                    }
                    .wrapStatus{
                        float: right;
                    }
                    .wrapFilter{
                        float: right;
                        margin: 0 10px 0 0 !important;
                        padding: 0 !important;
                        width: auto !important;
                    }
                    .labelFilter{
                        
                    }
                    .labelStatus{
                        
                    }
                    .colListCase1{
                        float: left;
                        width: 12%;
                        padding-right: 5px;
                    }
                    .colListCase2{
                        float: left;
                        width: 14%;
                        padding-right: 5px;
                    }
                    .colListCase3{
                        float: left;
                        width: 33%;
                        padding-right: 5px;
                    }
                    .colListCase4{
                        float: left;
                        width: 12%;
                        padding-right: 5px;
                    }
                    .colListCase5{
                        float: left;
                        width: 12%;
                        padding-right: 5px;
                    }
                    .colListCase6{
                        float: left;
                        width: 16%;
                        padding-right: 5px;
                    }
                    .colListCase7{
                        float: left;
                        width: 13%;
                        padding-right: 5px;
                    }
                    .rowListCase{
                        border-bottom: 1px solid #cdcdcd;
                        float: left;
                        padding: 7px 10px;
                        width: 100%;
                        position: relative;
                    }
                    .mailListCase{
                        float: left;
                        padding: 15px;
                        width: 100%;
                    }
                    .ideaList{
                        float: left;
                        padding: 15px;
                        width: 100%;
                    }
                    .header{
                         border-bottom: 2px solid #cdcdcd;
                        padding-top: 0;
                    }
                    .cancelCreateCase{
                        bottom: 0;
                        color: #f47421;
                        position: absolute;
                        right: 15px;
                        cursor: pointer;
                    }
                    .iColorOrange{
                        color: #f47421;
                    }
                    .iColorGreen{
                        color: #7BB74B;
                    }
                    
                    .phone_call{
                        background: url("{!URLFOR($Resource.P2P_ResMySupport, 'call_icon.png')}") no-repeat scroll left center transparent;
                        padding-bottom: 5px;
                        padding-left: 30px;
                        padding-top: 5px;
                    }
                    .form{
                        background: url("{!URLFOR($Resource.P2P_ResMySupport, 'hambergur_menu_icon.png')}") no-repeat scroll left center transparent;
                        padding-bottom: 5px;
                        padding-left: 30px;
                        padding-top: 5px;
                    }
                    .email{
                        background: url("{!URLFOR($Resource.P2P_ResMySupport, 'email.png')}") no-repeat scroll left center transparent;
                        padding-bottom: 5px;
                        padding-left: 30px;
                        padding-top: 5px;
                        background-size: 26px 27px;
                    }
                    .livechat{
                        background: url("{!URLFOR($Resource.P2P_ResMySupport, 'live_chat_icon.png')}") no-repeat scroll left center transparent;
                        padding-bottom: 5px;
                        padding-left: 30px;
                        padding-top: 5px;
                    }
                    .medium{
                        color: #F4731E;
                    }
                    .high{
                        color: #E40520;
                    }
                    .solved{ 
                        background-color: #F1F2F2; 
                    } 
                    .solved .case_status{
                        background-color: #7BB74B;
                        color: #fff;
                        border-radius: 3px;
                        padding: 2px 5px;
                        text-transform: uppercase;
                        text-align: center;
                        float: left;
                        line-height: 18px;
                        width: 100%;
                    }
                    .case_solved{
                        background-color: #7BB74B;
                        color: #fff;
                        border-radius: 3px;
                        padding: 2px 5px;
                        text-transform: uppercase;
                        text-align: center;
                        line-height: 18px;
                    }
                    .working .case_status{
                        background-color: #F7941E;
                        color: #fff;
                        border-radius: 3px;
                        padding: 2px 5px;
                        text-transform: uppercase;
                        text-align: center;
                        float: left;
                        line-height: 18px;
                        width: 100%;
                    }
                    .case_working{
                        background-color: #F7941E;
                        color: #fff;
                        border-radius: 3px;
                        padding: 2px 5px;
                        text-transform: uppercase;
                        text-align: center;
                        line-height: 18px;
                    }
                    .new .case_status{
                        background-color: red;
                        color: #fff;
                        border-radius: 3px;
                        padding: 2px 5px;
                        text-transform: uppercase;
                        text-align: center;
                        float: left;
                        line-height: 18px;
                        width: 100%;
                    }
                    .case_new{
                        background-color: red;
                        color: #fff;
                        border-radius: 3px;
                        padding: 2px 5px;
                        text-transform: uppercase;
                        text-align: center;
                        line-height: 18px;
                    }
                    .awaitingfeedback .case_status{
                        background-color: black;
                        color: #fff;
                        border-radius: 3px;
                        padding: 2px 5px;
                        text-transform: uppercase;
                        text-align: center;
                        float: left;
                        line-height: 18px;
                        width: 100%;
                    }
                    .case_awaitingfeedback{
                        background-color: black;
                        color: #fff;
                        border-radius: 3px;
                        padding: 2px 5px;
                        text-transform: uppercase;
                        text-align: center;
                        line-height: 18px;
                    }
                    .iColorBlue{
                        color: #2A5DB0;
                    }
                    .wrapPageInfo{
                        float: left;
                    }
                    .wrapCreateYourQuestion{
                        float: left;
                        position: relative;
                        width: 100%;
                    }
                    .wrapCreateYourIdea{
                        float: left;
                        position: relative;
                        width: 100%;
                    }
                    .doubleLine{
                        border: 1px solid #cdcdcd;
                        margin-bottom: 0;
                    }
                    .col-case-label{
                        float: left;
                        width: 20%;
                        padding-left: 15px;
                        padding-right: 15px;
                    }
                    .wrapCaseLabel{
                        border-bottom: 1px solid #cdcdcd;
                        float: left;
                        padding-bottom: 10px;
                        width: 100%;
                        padding-top: 10px;
                    }
                    .btnPostIdea{
                    
                    }
                    .spaceTopFromLabel{
                        margin-top: 5px;
                    }
                    .btnSubmitIdea{
                        float: left;
                        padding-left: 0;
                        padding-right: 0;
                        min-width: 33.33%;
                    }
                    .ideaCol1{
                        width: 10%;
                        float: left;
                        padding-right: 5px;
                    }
                    .ideaCol2{
                        width: 15%;
                        float: left;
                        padding-right: 5px;
                    }
                    .ideaCol3{
                        width: 43%;
                        float: left;
                        padding-right: 5px;
                    }
                    .ideaCol4{
                        width: 17%;
                        float: left;
                        padding-right: 5px;
                    }
                    .ideaCol5{
                        width: 15%;
                        float: left;
                        padding-right: 5px;
                    }
                    .createBy{
                        color: #939598;
                    }
                    .ideaTeaser{
                        clear: both;
                        float: left;
                        line-height: 16px;
                        margin-bottom: 5px;
                        margin-top: 5px;
                        width: 100%;
                    }
                    .hasComment{
                        clear: both;
                        float: left;
                        padding-left: 25px;
                        cursor: pointer;
                        background: url("{!URLFOR($Resource.P2P_ResMySupport, 'icon_comment.png')}") no-repeat scroll left center transparent;
                    }
                    .new_status, 
                    .ideaStatus{
                        color: #fff;
                        display: block;
                        float: left;
                        font-size: 12px;
                        line-height: 11px;
                        padding: 5px 10px;
                        text-align: center;
                        text-transform: uppercase;
                    }
                    .Under_Consideration{
                    	background-color: #f7941e;
                    }
                    .Not_Yet_Reviewed{
                    	background-color: #EF4136;
                    }
                    .Coming_Soon{
                    	background-color: #f4731e;
                    }
                    .Delivered{
                    	background-color: #7BB74B;
                    }
                    .Reviewed{
                    	background-color: black;
                    }
                    .default_vote{
                        background-image: url("{!URLFOR($Resource.P2P_ResMySupport, 'icon_votes/use_has_not_vote.png')}");
                        background-attachment: scroll;
                        background-color: #f1f2f2;
                        background-position: center center;
                        background-repeat: no-repeat;
                        border-bottom: 2px solid #acacac;
                        float: left;
                        height: 35px;
                        width: 35px;
                        cursor: pointer;
                        transition:background-image 222ms ease-out 222ms;
                        border-radius: 5px;
                    }
                    .vote_voted{
                        background-image: url("{!URLFOR($Resource.P2P_ResMySupport, 'icon_votes/user_voted.png')}") !important;
                        background-position: center 4px !important;
                        background-color: #7bb74b !important;
                    }
                    .vote_unvote{
                        background-image: url("{!URLFOR($Resource.P2P_ResMySupport, 'icon_votes/user_vote.png')}") !important;
                        background-position: center 2px !important;
                    }
                    .unvote_voted{
                        background-image: url("{!URLFOR($Resource.P2P_ResMySupport, 'icon_votes/user_unvoted.png')}") !important;
                        background-position: center 2px !important;
                        background-color: #f4731e !important;
                    }
                    .unvote_unvote{
                        background-image: url("{!URLFOR($Resource.P2P_ResMySupport, 'icon_votes/user_unvote.png')}") !important;
                        background-position: center 4px !important;
                    }
                    .default_vote:HOVER{
                        background-image: url("{!URLFOR($Resource.P2P_ResMySupport, 'icon_votes/use_has_not_vote_hover.png')}");
                        background-position: center 4px;
                        transition:background-image 222ms ease-out 222ms;
                    }
                    .default_unvote{
                        background-image: url("{!URLFOR($Resource.P2P_ResMySupport, 'icon_votes/use_has_not_unvote.png')}");
                        background-attachment: scroll;
                        background-color: #f1f2f2;
                        background-position: center center;
                        background-repeat: no-repeat;
                        border-bottom: 2px solid #acacac;
                        float: left;
                        height: 35px;
                        width: 35px;
                        cursor: pointer;
                        transition:background-image 222ms ease-out 222ms;
                        border-radius: 5px;
                    }
                    .default_unvote:HOVER{
                        background-image: url("{!URLFOR($Resource.P2P_ResMySupport, 'icon_votes/use_has_not_unvote_hover.png')}");
                        background-position: center 4px;
                        transition:background-image 222ms ease-out 222ms;
                    }
                    .number_of_vote{
                        float: left;
                        font-size: 25px;
                        line-height: 21px;
                        min-width: 40px;
                        text-align: center;
                    }
                    .labelVote{
                        clear: both;
                        float: left;
                        min-width: 40px;
                    }
                    .wrap_number_of_vote{
                        float: left;
                        margin-left: 10px;
                        margin-right: 10px;
                        min-width: 40px;
                        text-align: center;
                    }
                    .votePositive{
                        color: #7BB74B;
                    }
                    
                    .voteNegative{
                        color: #E40520;
                    }
                    .showMeOnMobileSite{
                        display: none;
                        float: left;
                        margin-top: 5px;
                        padding-left: 0;
                    }
                    .wrapMenuItemLeft{
                        float: left;
                        width: 25%;
                        margin-bottom: 15px;
                    }
                    .menuItemLeft{
                        background-color: #fff;
                        border-radius: 5px 0 0 5px;
                        margin: 0;
                        padding: 0;
                        overflow: hidden;
                    }
                    .menuItemLeft li{
                        border-bottom: 1px solid #cdcdcd;
                        font-family: "SourceSansPro Bold";
                        list-style: none;
                        padding-bottom: 8px;
                        padding-left: 15px;
                        padding-top: 8px;
                        color: #2A5DB0;
                    }
                    .wrapMenuItemRight ul li a{
                        color: #333;
                    }
                    .menuItemLeft li a{
                        
                    }
                    .menuItemLeft .menuItemActive{
                        border-left: 5px solid #7bb74b;
                        padding-left: 10px;
                    }
                    .menuItemLeft li:last-child{
                        border-bottom: 0;
                        border-right: 0 none;
                    }
                    .wrapMenuItemRight{
                        background-color: #fff;
                        border-left: 1px solid #f0f0f0;
                        border-radius: 0 5px 5px;
                        box-shadow: -8px 0 10px -13px #666666;
                        float: left;
                        margin-bottom: 15px;
                        overflow: hidden;
                        padding-left: 15px;
                        padding-right: 15px;
                        padding-top: 15px;
                        width: 75%;
                    }
                    .contactColDetailRight{
                        float: right;
                        width: 35%;
                        padding-right: 15px;
                    }
                    .contactColDetailLeft{
                        float: left;
                        padding-left: 15px;
                        padding-right: 15px;
                        width: 65%;
                        padding-top: 15px;
                    }
                    .wrapContactInfo{
                        
                    }
                    .borderSeperate{
                        border: 1px solid #cdcdcd;
                        float: left;
                        margin-bottom: 10px;
                        margin-top: 10px;
                        width: 100%;
                    }
                    
                    .borderSeperateMini{
                        border-bottom: 1px solid #cdcdcd;
                        float: left;
                        margin-bottom: 10px;
                        margin-top: 10px;
                        width: 100%;
                    }
                    
                    .caseItem{
                        float: left;
                        padding: 5px 15px;
                        width: 25%;
                    }
                    .caseBorder{
                        border-bottom: 1px solid #cdcdcd;
                        float: left;
                        padding-bottom: 10px;
                        width: 100%;
                        white-space: nowrap;
                    }
                    .wrapCaseItem{
                        float: left;
                        width: 100%;
                    }
                    .wrapComment{
                        float: left;
                        padding-left: 82px;
                        position: relative;
                        width: 100%;
                        min-height: 100px;
                    }
                    .commentImage{
                        left: 0;
                        position: absolute;
                        top: 5px;
                        width: 72px;
                    }
                    .setLocationCommentImage table img{
                        left: 0;
                        position: absolute;
                        top: 5px;
                        width: 72px;
                    }
                    .alittleSpaceBottom{
                        float: left;
                        margin-bottom: 10px;
                        width: 100%;
                    }
                    .commentTeaser{
                        float: left;
                        line-height: 16px;
                        min-height: 41px;
                        width: 100%;
                        margin-top: 5px;
                    }
                    .wrapAttachment{
                        float: left;
                        padding-left: 0;
                        padding-right: 0;
                        margin-top: 15px;
                        padding-right: 15px;
                        width: 119px;
                        height: 115px;
                    }
                    /*.wrapAttachment:nth-child(2n){
                        padding-left: 15px;
                        padding-right: 0;
                    }*/
                    .wrapAttachment span{
                        float: left;
                        overflow: hidden;
                        text-overflow: ellipsis;
                        width: 100%;
                    }
                    .wrapAttachment img{
                        float: left;
                        width: 100%;
                    }
                    .wrapCaseOwner{
                        float: left;
                        margin-top: 5px;
                        padding-left: 60px;
                        position: relative;
                        width: 100%;
                    }
                    .setLocationOwnerImage table img{
                        left: 0;
                        position: absolute;
                        width: 52px;
                    }
                    .ownerImage{
                        left: 0;
                        position: absolute;
                        width: 52px;
                    }
                    .iTitle{
                        float: left;
                        margin-top: 15px;
                        width: 100%;
                    }
                    .iHiden{
                        display: none;
                    }
                    .mainCaseOwner{
                        float: left;
                        width: 100%;
                    }
                    .wrapComponentLeft{
                        float: left;
                        padding-right: 15px;
                        width: 60%;
                    }
                    .wrapComponentRight{
                        float: left;
                        width: 40%;
                    }
                    .spaceInRank{
                        padding-left: 92px;
                        margin-bottom: 15px;
                    }
                    .btnReply{
                        float: left;
                        margin-right: 10px;
                        padding-left: 0;
                        padding-right: 0;
                        width: 200px;
                        margin-top: 15px;
                        min-width: 200px;
                    }
                    .wrapBtnReply{
                        float: left;
                        width: 100%;
                    }
                    .mainSubmitReply{
                        background-color: #f0f0f0;
                        border-radius: 5px;
                        float: left;
                        overflow: hidden;
                        padding: 15px;
                        width: 100%;
                        border-bottom: 2px solid #acacac;
                    }
                    .componentRight{
                        float: left;
                        width: 35%;
                    }
                    .componentLeft{
                        padding-left: 82px;
                        padding-right: 15px;
                        position: relative;
                        width: 65%;
                        float: left;
                    }
                    .wrapMainComment{
                        border-bottom: 1px solid #cdcdcd;
                        float: left;
                        min-height: 92px;
                        padding-bottom: 10px;
                        width: 100%;
                        margin-bottom: 10px;
                    }
                    
                    .wrapMainComment:last-child{
                        border-bottom: 0;
                        padding-top: 10px;
                        padding-bottom: 0;
                        margin-bottom: 0;
                    }
                    .commentNote{
                        clear: both;
                        float: left;
                        margin-top: 15px;
                        padding-left: 82px;
                        width: 100%;
                    }
                    .label_question{
                        margin-left: 5px;
                        position: relative;
                        top: 2px;
                    }
                    .overideMe{
                        width: 30%;
                    }
                    .overideMe:nth-child(2n){
                        width: 70%;
                    }
                    .iColorGrey{
                        color: #939598;
                    }
                    .wrapHeadLabelAbsolute{
                        position: absolute;
                        top: -44px;
                    }
                    .backToIdeaList{
                        float: left;
                    }
                    .wrapCaseFilter{
                        float: right;
                        padding-left: 15px;
                        padding-right: 15px;
                    }
                    .wrapCaseSearch{
                        float: left;
                        padding-left: 15px;
                    }
                    
                    .listViewport{
                        margin-top: 0;
                    }
                   
                    .mainAttachMain{
                        background-color: #f0f0f0;
                        float: left;
                        margin-top: 15px;
                        padding-bottom: 15px;
                        padding-left: 15px;
                        padding-top: 15px;
                        width: 100%;
                    }
                    .effectSelectFullWidth select{
                        margin-top: 5px;
                        width: 100%;
                    }
                    .removePaddingRight{
                        padding-right: 0;
                    }
                    .articleTitle{
                        border-bottom: 2px solid #cdcdcd;
                        margin-bottom: 10px;
                    }
                    .pc_last_col {
                        display: none;
                    }
                    .pc_more_item{
                        float: left;
                        width: 100%;
                        margin-top: 10px;
                    }
                    .widthHiddenComment{
                        width: 100%;
                    }
                    .rmPaddingBottom{
                        padding-bottom: 0;
                    }
                    .full-width-480{
                        width: auto;
                    }
                    .back:HOVER{
                        text-decoration: underline !important;
                    }
                    .errorMsg{
                    	position: absolute;
                    	bottom: -21px;
                    }
                    @media (max-width: 1024px){
                       
                        .hideUnder1024{
                            display: none;
                        }
                        .showUnder1024{
                            display: block;
                        }
                        .colAdBreakdowr{
                            width: 9.05%
                        }
                        .colAdBreakdowrAction{
                            float: right;
                            width: 23px;
                            background-position: right center;
                        }
                        
                        .ideaCol1{
                            width: 12%;
                        }
                        .ideaCol2{
                            width: 17%;
                        }
                        .ideaCol3{
                            width: 50%;
                        }
                        
                        .ideaCol5{
                            width: 21%;
                        }
                        .ideaCol4{
                            display: none;
                        }
                        .ideaShow3{
                            display: block;
                        }
                    }
                    @media (max-width: 1023px){
                        .overideMe{
                            width: 100%;
                        }
                        .overideMe:nth-child(2n){
                            margin-top: 15px;
                            width: 100%;
                        }
                        .colListCase6{
                            display: none;
                        }
                        .clc1,
                        .clc2,
                        .clc3{
                            display: none;
                        }
                        .clc4{
                            display: block;
                        }
                        .colListCase1{width: 17%;}
                        .colListCase2{width: 20%;}
                        .colListCase3{width: 28%;}
                        .colListCase4{width: 17%;}
                        .colListCase5{width: 17%;}
                        .col-case-label{
                            width: 33.33%;
                        }
                        .rowListCase{
                            padding-right: 30px;
                            
                        }
                        .pc_last_col {
                            display: block;
                            padding: 6px 15px;
                            position: absolute;
                            right: 0;
                            top: 1px;
                        }
                        .caseItem{
                            width: 33.333%;
                        }
                    }
                    @media (max-width: 992px){
                        .contactColDetailRight{
                            width: 40%;
                        }
                        .contactColDetailLeft{
                            width: 60%;
                        }
                        .wrapCaseFilter{
                            margin-top: 15px;
                            width: 100%;
                        }
                        .wrapFilter select, .wrapStatus select {
                            width: 100%;
                        }
                        .wrapCaseSearch{
                            width: 100%;
                        }
                        .wrapFilter {
                            float: left;
                            margin-right: 0 !important;
                            padding-right: 15px !important;
                            text-align: right;
                            width: 50% !important;
                            position: relative;
                            padding-left: 100px !important;
                        }
                        .labelFilter {
                            left: 0;
                            position: absolute;
                            top: 3px;
                        }
                        .paddingFilter{
                        
                        }
                        .wrapStatus {
                            float: right;
                            text-align: left;
                            width: 50%;
                            position: relative;
                            padding-left: 60px;
                        }
                        .labelStatus {
                            left: 0;
                            position: absolute;
                            top: 3px;
                        }
                        
                    }
                    @media (max-width: 768px){
                        .hideUnder768{
                            display: none;
                        }
                        .showUnder768{
                            display: block;
                        }
                        .colAdBreakdowr{
                            width: 13%
                        }
                        .addNewLeft{
                            width: 100%;
                        }
                        .addNewRight{
                            width: 100%;
                            padding-left: 0;
                        }
                        .ideaCol3{
                            display: none;
                        }
                        .ideaShow2{
                            display: block;
                        }
                        .showMeOnMobileSite{
                            display: block;
                        }
                        
                        .ideaCol1{
                            width: 22.33%;
                        }
                        .ideaCol2{
                            width: 46.33%;
                        }
                        
                        .ideaCol5{
                            width: 31.33%;
                        }
                        .contactColDetailRight{
                            float: left;
                            width: 100%;
                            padding-right: 15px;
                            padding-left: 15px;
                        }
                        .backToIdeaList {
                            margin-bottom: 27px;
                        }
                        .contactColDetailLeft{
                            float: left;
                            padding-left: 15px;
                            padding-right: 15px;
                            width: 100%;
                        }
                        .mainCaseOwner{
                            width: 50%;
                        }
                        .wrapContactInfo{
                            
                        }
                        .caseItem{
                            width: 50%;
                        }
                        .componentRight {
                            float: left;
                            margin-top: 10px;
                            padding-left: 82px;
                            width: 100%;
                        }
                        .componentLeft {
                            float: left;
                            padding-left: 82px;
                            padding-right: 0;
                            position: relative;
                            width: 100%;
                        }
                    }
                    @media (max-width: 767px){
                        .btnPostIdea{
                            margin-top: 15px;
                        }
                        .labelSearch{
                            width: 100%;
                        }
                        .hideUnder767{
                            display: none;
                        }
                        .showUnder767{
                            display: block;
                        }
                        .inputSearch{
                            width: 86%;
                        }
                        .faq_col_left{
                            width:100%;
                            padding-right: 0;
                        }
                        .faq_col_right{
                            width:100%;
                        }
                        .firstCol{
                            width: 100%;
                        }
                        .secondCol{
                            width: 50%;
                        }
                        .thirdCol{
                            width: 50%;
                        }
                        .activeMargin{ margin-top: 15px;}
                        .btnLiveChat{
                            /*background-position: 15% center;*/
                        }
                        .col-xs-6{
                            width: 100%;
                        }
                        .wrapStatus{
                            width: 49%;
                            padding-left: 60px;
                            position: relative;
                        }
                        .wrapFilter{
                            width: 50% !important;
                            margin-right: 0 !important;
                            text-align: left;
                            padding-right: 0 !important;
                        }
                        .labelStatus{
                            margin-right: 0;
                            top: 3px;
                            left: 0;
                            position: absolute;
                        }
                        .wrapFilter select, .wrapStatus select{
                            width: 100%;
                        }
                        .wrapPaginationRight {
                            float: left;
                            margin-top: 15px;
                            width: 100%;
                            margin-right: 0;
                        }
                        
                        .colListCase7{width: 28%;}
                        .colListCase2{width: 35%;}
                        .colListCase3{width: 36%;}
                        
                        .colListCase1{display:none;}
                        .colListCase4{display: none;}
                        .colListCase5{display: none;}
                        
                        .clc2,
                        .clc3, .clc5{
                            display: block;
                        }
                        .col-case-label{
                            width: 50%;
                        }
                        .wrapMenuItemLeft{
                            width: 100%;
                        }
                        .wrapMenuItemRight{
                            box-shadow: none;
                            width: 100%;
                            border: 0;
                        }
                        .menuItemLeft li{
                            float: left;
                            width: 33.33%;
                            border-right: 1px solid #cdcdcd;
                        }
                        .menuItemLeft li:nth-child(3n){
                            border-right: 0;
                        }
                        .menuItemLeft{
                            border-radius: 5px;
                        }
                        .wrapMenuItemRight{
                            border-radius: 5px;
                        }
                        .removePaddingLeft{
                            padding-left: 0;
                        }
                    }
                    @media (max-width: 550px){
                        .text_search{
                            float: left;
                            width: 100%;
                            margin-bottom: 10px;
                            margin-left: 0;
                        }
                        
                    }
                    @media (max-width: 480px){
                        .wrapComponentLeft{
                            padding-right: 0;
                            width: 100%;
                        }
                        .width200{
                            
                        }
                        .wrapFilter {
                            width: 50% !important;
                        }
                        .nav-tabs > li > a{
                            margin-right: 10px;
                        }
                        /*.wrapAttachment:nth-child(2n){
                            padding-left: 0;
                        }*/
                        .wrapComponentRight{
                            width: 100%;
                        }
                        .width200{
                            width: 200px;
                        }
                        .full-width-480{
                            width: 100%;
                        }
                        .caseItem{
                            width: 100%;
                        }
                        .mainCaseOwner{
                            width: 100%;
                        }
                        .defaulMarginTop{
                            margin-top: 0;
                        }
                        .miniTitle{
                            width: 100%;
                        }
                        .wrapSummeryInfo{
                            width: 100%;
                        }
                        .hideUnder480{
                            display: none;
                        }
                        .showUnder480{
                            display: block;
                        }
                        .nav-tabs > li{
                            width: 33.3333%;
                            padding-right: 15px;
                        }
                        .nav-tabs > li:last-child{
                            padding-right: 0;
                        }
                        .isSafari .nav-tabs > li:last-child{
                            position: relative;
                            right: -2px;
                        }
                        .isSafari .nav-tabs > li:first-child{
                            position: relative;
                            left: 0;
                        }
                        .nav-tabs > li > a{
                            width: 100%;
                        }
                        .inputSearch{
                            width: 80%;
                        }
                        .firstCol{
                            width: 100%;
                        }
                        .secondCol{
                            width: 100%;
                        }
                        .thirdCol{
                            width: 100%;
                        }
                        
                        .wrapFilter,
                        .wrapStatus{
                            padding-left: 0 !important;
                        }
                        .labelFilter,
                        .labelStatus{
                            display: none;
                        }
                        .wrapFilter select,
                        .wrapStatus select {
                            width: 100%;
                        }
                        .searchCase{
                            width: 83%;
                        }
                        
                        .colListCase1{width: 42%;}
                        .colListCase1{width: 42%;}
                        .colListCase7{width: 40%;}
                        .colListCase2{width: 58%;}
                        .colListCase3{display: none;}
                        .col-case-label{
                            width: 100%;
                        }
                        .clc1{
                            display: block;
                        }
                        .wrapAttachment{
                            /*width: 100%;*/
                            padding-left: 0;
                            padding-right: 0;
                            
                        }
                        /*.wrapAttachmentnth-child(2n){
                            padding-left: 0;
                        }*/
                        .wrapComment{
                            padding-left: 0;
                        }
                        .setLocationCommentImage table img{
                            display: none;
                        }
                        .commentImage{
                            display: none;
                        }
                        .componentLeft .commentImage{
                            display: block;
                        }
                        .spaceInRank{
                            padding-left: 15px;
                        }
                        .ideaCol1{
                            width: 40%;
                        }
                        .ideaCol2{
                            display: none;
                        }
                        .ideaShow1{
                            display: block;
                        }
                        .ideaCol5{
                            width: 60%;
                        }
                    }
                    @media (max-width: 479px){
                        .required{
                            margin-top: 15px !important;
                            margin-left: 0 !important;
                            clear: both;
                        }
                    }
                    @media (max-width: 450px){
                        .hideUnder450{
                            display: none;
                        }
                    }
                    @media (max-width: 379px){
                        
                        .menuItemLeft li{
                            width: 50%;
                            border-right: 1px solid #cdcdcd;
                        }
                        .menuItemLeft li:nth-child(3n){
                            border-right: 1px solid #cdcdcd;
                        }
                        .menuItemLeft li:nth-child(2n){
                            border-right: 0;
                        }
                        .menuItemLeft li:nth-child(9n){
                            border-bottom: 0;
                        }
                        .beforeLastChild{
                            border-bottom: 0 !important;
                        }
                        .inputSearch{
                            width: 80%;
                        }
                        .hideMeUnder480{
                            display: none;
                        }
                        .col-xs-6{
                            width: 100%;
                        }
                        .hideUnder379{
                            display: none;
                        }
                        .showUnder379{
                            display: block;
                        }
                        .searchCase{
                            width: 80%;
                        }
                        .ideaCol1{
                            width: 40%;
                        }
                        .ideaCol2{
                            display: none;
                        }
                        .ideaShow1{
                            display: block;
                        }
                        .ideaCol5{
                            width: 60%;
                        }
                    }
                    .container{
                        min-width: 320px;
                    }
                    .set_width_50_percents{
                        width: 50%;
                        position: relative;
                        float: left;
                    }
                    <!--11-Dec-2014 to move text under Finalcial Update to icon -->
                    .remove-padding-right {
                        padding-right: 0;
                        text-align: right;
                    }
                 @media (max-width: 767px){
                    .padding-zero {
                        padding-left:0;
                    }
                    .remove-padding-right {
                        padding-right: 0;
                        text-align: left;
                    }
                 }
                 
                </style>
          </head>
          <apex:composition template="P2P_Template">
              <apex:define name="body" >
                  <body  id="comp" class="support">
                      
                <!-- Contact Tab Parts -->
                <apex:outputPanel styleClass="popupHeaderInfo">
                    <apex:image value="{!URLFOR($Resource.P2P_Icons, 'gumtree-icons/popup-arrow.png')}" /><br/>
                    <apex:outputLabel value="Show info" />
                </apex:outputPanel>
                <div class="modal fade" role="dialog" id="popupChatteam">
                    <div class="modal-dialog"  style="max-width:360px">
                        <div class="modal-content">
                            <div class="modal-header">
                                <!-- <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button> -->
                                <h4 class="modal-title">Live Chat</h4>
                            </div>
                            <div class="modal-body" style="padding-bottom: 0;">
                                <div role="form" class="form-horizontal">
                                    <div class="form-group">
                                        <div style="margin-left:18px;margin-right:15px;">
                                            <apex:outputText value="Would you like to chat with customer support?" />
                                            <br/><br/>
                                            <apex:outputText value="The team can help with all ad and site related questions" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <iframe src="{!SitePrefix}/apex/P2P_CustomerChatButton" width="100%" height="40px" scrolling="no" frameborder="0" align="middle"></iframe>
                                        <!-- 
                                        <iframe src="{!SitePrefix}/apex/P2P_FinanceChatButton" width="100%" height="40px" scrolling="no" frameborder="0" align="middle"></iframe>
                                        <apex:outputText value="Invoice questions" /> -->
                                    </div>
                                    <!--
                                    <div class="form-group">
                                        <div style="margin-left:18px;margin-right:15px;">
                                            <apex:outputText value="Ad related questions and issues" />
                                        </div>
                                    </div>
                                    --->
                                </div>
                            </div>
                            <div class="modal-footer"></div>
                            <img class="close_popup" onclick="$('#popupChatteam').modal('hide');" alt="Close" src="{!URLFOR($Resource.P2P_Resources, 'svg/close.svg')}"/>
                        </div>
                    </div>
                </div>
                <script>
                    /*--Attachment functions--*/
                    var CHUNK_SIZE = 180000; //Must be evenly divisible by 3, if not, data corruption will occur
                    
                    //Contact file upload
                    var contactResponseErrorsId = 'responseErrors_';
                    var contactFileInputId = 'fileInput_';
                    var contactConfirmInputId = 'selfileInput_';
                    var contactResponseErrorsIdCaseDetail = 'responseErrorsCaseDetail_';
                    var contactFileInputIdCaseDetail = 'fileInputCaseDetail_';
                    var contactConfirmInputIdCaseDetail = 'selfileInputCaseDetail_';
                    
                    //Idea file upload
                    var ideaResponseErrorsId = 'responseErrorsIdea_';
                    var ideaFileInputId = 'fileInputIdea_';
                    var ideaConfirmInputId = 'selfileInputIdea_';
                    
                    //Idea comment file upload
                    var ideaCommentResponseErrorsId = 'responseErrorsIdeaComment_';
                    var ideaCommentFileInputId = 'fileInputIdeaComment_';
                    var ideaCommentConfirmInputId = 'selfileInputIdeaComment_';
                    
                    function isCompletedUpload(maxIndex, responseErrorsId){
                        for(var i = 0; i < maxIndex; i++){
                            var msgResponse = document.createElement(responseErrorsId + i).innerHTML;
                            if(msgResponse != ' - Completed' && msgResponse != '') return false;
                        }
                        return true;
                    }
                    
                    function addMoreInputFileBox(containerId, acceptType, fileInputId, confirmInputId, responseErrorsId){
                        var container = document.getElementById(containerId);
                        var childSize = container.children.length/2;
                        
                        //Create an input type dynamically.
                        //Append the element in page (in span/div).
                        var checkbox = document.createElement('input');
                        checkbox.type = "checkbox";
                        checkbox.name = confirmInputId + childSize;
                        checkbox.checked = "true";
                        checkbox.id = confirmInputId + childSize;
                        container.appendChild(checkbox);
                        
                        var inputfile = document.createElement("input");
                        //Assign different attributes to the element.
                        inputfile.setAttribute("id", fileInputId + childSize);
                        inputfile.setAttribute("type", "file");
                        inputfile.setAttribute("value", "");
                        inputfile.setAttribute("name", "fileInput");
                        inputfile.setAttribute("accept", acceptType);
                        container.appendChild(inputfile);
                        
                        inputfile.addEventListener("change", 
                            function(e) {
                                var file = this.files[0];
                                var filename = ('name' in file) ? file.name : file.fileName;
                                
                                var containerDisplay = document.getElementById(containerId + '_Display');
                                //Assign different attributes to the element.
                                var inputfileDisplay = document.createElement("img");
                                inputfileDisplay.setAttribute("title", filename);
                                inputfileDisplay.setAttribute("class", "checkbox-checked align-checkbox-upload");
                                inputfileDisplay.setAttribute("id", confirmInputId + '_Display' + childSize);
                                inputfileDisplay.setAttribute("src", "{!URLFOR($Resource.P2P_Resources, 'gumtree-icons/checkbox-32x32.png')}");
                                containerDisplay.appendChild(inputfileDisplay);
                                
                                var filenameDisplay = document.createElement("div");
                                filenameDisplay.setAttribute("class","align-label-upload");
                                //Assign different attributes to the element.
                                filenameDisplay.innerHTML = filename.length > 18 ? filename.substring(0,17) + '...' : filename;
                                //Create response message text
                                var uploadStateDisplay = document.createElement("span");
                                uploadStateDisplay.setAttribute("id", responseErrorsId + childSize);
                                uploadStateDisplay.innerHTML = '';
                                filenameDisplay.appendChild(uploadStateDisplay);
                                containerDisplay.appendChild(filenameDisplay);
                                
                                inputfileDisplay.addEventListener("click", function(e){
                                    if(this.src.indexOf('gumtree-icons/checkbox-32x32.png') > -1){
                                        checkbox.checked = false;
                                        this.setAttribute("src", "{!URLFOR($Resource.P2P_Resources, 'gumtree-icons/unchecked-32x32.png')}");
                                        this.setAttribute("class", "checkbox-unchecked align-checkbox-upload");
                                    }else{
                                        checkbox.checked = true;
                                        this.setAttribute("src", "{!URLFOR($Resource.P2P_Resources, 'gumtree-icons/checkbox-32x32.png')}");
                                        this.setAttribute("class", "checkbox-checked align-checkbox-upload");
                                    }
                                    return false;
                                });
                                
                            }
                        
                        );
                        window.setTimeout(800, inputfile.click());
                    }
                    
                    function sumbitFilesFromContainerToParent(containerId, parentId, fileInputId, confirmInputId, responseErrorsId, submitCallback){
                        if(parentId == '') return;
                        var container = document.getElementById(containerId);
                        //No file to upload, submit the case to result list 
                        if(container.children.length == 0){
                            submitCallback();
                            return;
                        }
                        //total number of input file 
                        var childSize = container.children.length/2;
                        var filesArray = new Array();
                        for(var index = 0; index < childSize; index++){
                            //input file component 
                            var ele = document.getElementById(fileInputId + index);
                            //check box confirm to upload 
                            var tobeUploaded = document.getElementById(confirmInputId + index);
                            if(tobeUploaded.checked && typeof ele.files[0] != 'undefined'){ 
                                filesArray.push(ele.files[0]);
                            }else{
                                filesArray.push('');
                            }
                        }
                        var doUpload = false;
                        for(var index = 0; index < childSize; index++){
                            if(filesArray[index] != ''){
                                doUpload = true;
                                prepareFileUpload(index, childSize, parentId, filesArray, new Array(), confirmInputId, responseErrorsId, submitCallback);
                            }
                        }
                        if(!doUpload) submitCallback();
                    }
                    
                    function prepareFileUpload(index, childSize, parentId, filesArray, byteChunkArray, confirmInputId, responseErrorsId, submitCallback){
                        var currentFile = filesArray[index];
                        //Change appearience when uploading in progress 
                        var chkBoxImg = document.getElementById(confirmInputId + '_Display' + index);
                        chkBoxImg.setAttribute("src", "/img/loading.gif");
                        //Build the byteChunkArray array for the current file we are processing. This array is formatted as:
                        //['0-179999','180000-359999',etc] and represents the chunks of bytes that will be uploaded individually.
                        //First check to see if file size is less than the chunk size, if so first and only chunk is entire size of file
                        if(currentFile.size <= CHUNK_SIZE){
                            byteChunkArray[0] = '0-' + (currentFile.size - 1);
                        }else{
                            //Determine how many whole byte chunks make up the file,
                            var numOfFullChunks = Math.floor(currentFile.size / CHUNK_SIZE); //i.e. 1.2MB file would be 1000000 / CHUNK_SIZE
                            var remainderBytes = currentFile.size % CHUNK_SIZE; // would determine remainder of 1200000 bytes that is not a full chunk
                            var startByte = 0;
                            var endByte = CHUNK_SIZE - 1;
                            
                            //Loop through the number of full chunks and build the byteChunkArray array 
                            for(i = 0; i < numOfFullChunks; i++){
                                byteChunkArray[i] = startByte + '-' + endByte;
                                //Set new start and stop bytes for next iteration of loop
                                startByte = endByte + 1;
                                endByte += CHUNK_SIZE;
                            }
                            
                            //Add the last chunk of remaining bytes to the byteChunkArray
                            startByte = currentFile.size - remainderBytes;
                            endByte = currentFile.size;
                            byteChunkArray.push(startByte + '-' + endByte);
                        }
                        processFileUpload(index, childSize, null, parentId, currentFile, byteChunkArray, confirmInputId, responseErrorsId, submitCallback);
                    }
                    
                    function processFileUpload(index, childSize, sobjId, parentId, currentFile, byteChunkArray, confirmInputId, responseErrorsId, submitCallback){
                        //Proceed if there are still values in the byteChunkArray, if none, all piece of the file have been uploaded
                        if(byteChunkArray.length <= 0){
                            var chkBoxImg = document.getElementById(confirmInputId + '_Display' + index);
                            chkBoxImg.setAttribute("src", "{!URLFOR($Resource.P2P_Resources, 'gumtree-icons/checkbox-32x32.png')}");
                            chkBoxImg.setAttribute("class", "checkbox-checked align-checkbox-upload");
                            document.getElementById(responseErrorsId + index).innerHTML = ' - Completed';
                            if(isCompletedUpload(childSize, responseErrorsId)){ 
                                submitCallback();
                                return;
                            }
                        }
                        //Determine the byte range that needs to uploaded, if byteChunkArray is like... ['0-179999','180000-359999']
                        var indexes = byteChunkArray[0].split('-'); //... get the first index range '0-179999' -> ['0','179999']
                        var startByte = parseInt(indexes[0]); //0 
                        var stopByte = parseInt(indexes[1]); //179999 
                        var blobChunk;
                        //Slice the part of the file we want to upload, currentFile variable is set in checkForUploads() method that is called before this method
                         if (currentFile.slice) {
                            blobChunk = currentFile.slice(startByte , stopByte + 1);
                        } else if (currentFile.mozSlice) {
                            blobChunk = currentFile.mozSlice(startByte , stopByte + 1);
                        } else if (currentFile.webkitSlice) {
                            blobChunk = currentFile.webkitSlice(startByte , stopByte + 1);
                        }
                         
                        //Create a new reader object, part of HTML5 File API
                        var reader = new FileReader();
                        //Read the blobChunk as a binary string, reader.onloadend function below is automatically called after this line
                        reader.readAsBinaryString(blobChunk);
                        //reader.readAsDataURL(file);
                        
                        //Create a reader.onload function, this will execute immediately after reader.readAsBinaryString() function above;
                        reader.onloadend = function(evt){ 
                            if(evt.target.readyState == FileReader.DONE){ //Make sure read was successful, DONE == 2 
                                //Base 64 encode the data for transmission to the server with JS remoting, window.btoa currently on support by some browsers
                                var base64value = window.btoa(evt.target.result);
                                var filename = ('name' in currentFile) ? currentFile.name : currentFile.fileName;
                                try{
                                    Visualforce.remoting.Manager.invokeAction(
                                        '{!$RemoteAction.P2P_MySupportController.createChunkAttachment}', 
                                        sobjId, filename, base64value, parentId, getMediaType(currentFile),
                                        function(result, event){
                                            if (event.status) {
                                                byteChunkArray.shift(); //removes 0 index 
                                                processFileUpload(index, childSize, result, parentId, currentFile, byteChunkArray, confirmInputId, responseErrorsId, submitCallback);
                                            } else if (event.type === 'exception') {
                                                document.getElementById(responseErrorsId + index).innerHTML = '<br/>' + event.message;
                                            } else {
                                                document.getElementById(responseErrorsId + index).innerHTML = '<br/>' + event.message;
                                            }
                                        }, 
                                        {escape: true}
                                    );
                                }catch(ex){
                                    alert(ex.message); 
                                }
                            }else{
                                //Error handling for bad read
                                alert('Could not read file');
                            }
                        };
                    }
                    
                    function getMediaType(file){
                        if(file.type != '') return file.type;
                        var filename = ('name' in file) ? file.name : file.fileName;
                        if(filename.endsWith('.docx')) return 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';
                        if(filename.endsWith('.doc')) return 'application/msword';
                        if(filename.endsWith('.xls')) return 'application/vnd.ms-excel';
                        if(filename.endsWith('.xlsx')) return 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheetapplication/vnd.openxmlformats-officedocument.spreadsheetml.sheet';
                        if(filename.endsWith('.pdf')) return 'application/pdf';
                        return '';
                    }
                    
                    String.prototype.endsWith = function(suffix) {
                        return this.indexOf(suffix, this.length - suffix.length) !== -1;
                    };
                    
                </script>
                <!-- END Contact tap part (ADDED CODE) -->
                <div class="container wrapContentBg">
                 
                 <!-- 2015-01-02 - Feedback tab integrated with Clicktools by Steve Paul -->
                 <div class="feedback" id="feedback">
                      <!--- hard code Q1 for testing - replace with {!acc.Id} --->
                      <a href="http://supportsurvey.gumtree.com/go?iv=18xfknvyio31q&q1={!currentaccountId}&q2=&q3=Support&q4=Web">Feedback</a>
                 </div>
                   
                 <apex:outputPanel id="msgSysPanel" rendered="{!msgErr.size!=0}">
                    <div class="row">
                    <div class="col-md-12">
                        <!-- 11-Dec-2014 add 'padding-right: 10px;' to rigth aligne, remove padding rigth -->
                        <div class="accountTitle" style="float: left; width: 100%; padding-right: 10px;">
                        <div class="col-md-5 col-xs-12 col-sm-5" style="padding-left: 0;">
                            <img class="imageSignal" src="{!URLFOR($Resource.P2P_Icons, 'gumtree-icons/signal-icon.png')}"/> <h1 style="color: #009BDF;">Update</h1>
                        </div>
                        <div class="col-md-7 col-xs-12 col-sm-7 padding-zero remove-padding-right">
                    
                        <!--- Commented out by Steve Paul --->
                        <!--- <span style="margin-top: 3px; font-size: 15px; display: block;">Did you know? We can now set you up to pay your invoices via direct debit - making life even easier!</span> ---> 
                                             <apex:repeat value="{!msgErr}" var="msg">
                         <span style="margin-top: 3px; font-size: 15px; display: block; line-height: 18px;">  
                           <apex:outputText value="{!msg.MessageText__c}" escape="false" /> 
                         </span>
                       </apex:repeat>
                     
                     
                    </div>
                 </div>
            </div>
        </div>
       </apex:outputPanel>             
                    <div class="row">
                        <div class="col-md-12">
                            <div class="wrapTab">
                                <ul class="nav nav-tabs" role="tablist" id="myTab">
                                  <li role="presentation" class="{!IF(currentTab=='faq','active', '')}"><a href="#faq" role="tab" data-toggle="tab">FAQ</a></li>
                                  <li role="presentation" class="{!IF(currentTab=='contact','active', '')}"><a href="#contact" role="tab" data-toggle="tab">Contact</a></li>
                                  <li role="presentation" class="{!IF(currentTab=='ideas','active', '')}"><a href="#ideas" role="tab" data-toggle="tab">Ideas</a></li>
                                </ul>
                                
                                <div class="tab-content">
                                    <!-- FAQ tab -->
                                    <div role="tabpanel" class="tab-pane active" id="faq">
                                        <apex:form >
                                        <div class="wrapBtnTop">
                                            <div class="labelSearch"><h2 style="margin-top: 5px;">Search FAQs</h2></div>
                                            <apex:outputPanel layout="block" styleClass="wrapSearch">
                                                <apex:inputText value="{!searchTxt}" html-placeholder="Search" styleClass="inputSearch"/>
                                                <apex:actionStatus id="searchFaqStatus">
                                                    <apex:facet name="start">
                                                        <img style="padding: 10px 15px;" src="/img/loading.gif" />
                                                    </apex:facet>
                                                    <apex:facet name="stop">
                                                        <apex:outputPanel >
                                                            <button class="btnOrange btnSearch" onclick="searchFaq(); return false;">
                                                                <i class="fa fa-search"></i>
                                                            </button>
                                                            <apex:actionFunction status="searchFaqStatus" name="searchFaq" action="{!doSearchArticles}" rerender="pnlFaq"/>
                                                        </apex:outputPanel>
                                                    </apex:facet>
                                                </apex:actionStatus>
                                            </apex:outputPanel>
                                        </div>
                                        <div class="wrapContentFaq">
                                            <div class="faq_col_left">
                                                <apex:outputPanel id="pnlFaq">
                                                <apex:outputPanel rendered="{!NOT(isSearch)}">
                                                    <div class="wrapMenuItemLeft">
                                                        <ul class="menuItemLeft">
                                                            <apex:repeat value="{!cateTabs}" var="menu">
                                                                <li class="{!IF(menu==currentCategory, 'menuItemActive', '')}">
                                                                     <apex:commandLink action="{!getArticleByCate}" value="{!mTabs[menu]}" reRender="pnlFaq">
                                                                        <apex:param name="currentCategory" assignTo="{!currentCategory}" value="{!menu}"/>
                                                                    </apex:commandLink>
                                                                </li>
                                                            </apex:repeat>
                                                        </ul>
                                                    </div>
                                                    <div class="wrapMenuItemRight">
                                                        <apex:outputPanel rendered="{!NOT(isArticleDetail)}">
                                                            <h2>{!mTabs[currentCategory]}</h2>
                                                            <ul class="list_laq">
                                                            
                                                               <knowledge:articleList articleVar="article" pageSize="15" pageNumber="1"                
                                                                categories="Public_KB:{!currentCategory}">
                                                                    <li>
                                                                        <div class="labelTitleFaq">
<!--                                                                             <apex:commandLink onclick="window.location='{!SitePrefix}/apex/P2P_MySupport?id={!currentAccountId}&article={!article.UrlName}';return false;" value="{!article.Title}"> -->
<!--                                                                             </apex:commandLink> -->
                                                                        	<apex:commandLink onclick="window.location='{!URLFOR($Page.P2P_MySupport)}?article={!article.UrlName}';return false;" value="{!article.Title}"/>
                                                                        </div>
                                                                        <div class="teaserFaq">
                                                                            <apex:outputText value="{!article.Summary}" escape="false"/>
                                                                        </div>
                                                                    </li>
                                                               </knowledge:articleList>
                                                            
                                                               <!-- <apex:repeat value="{!lstArticlesByCate}" var="article" > 
                                                                    <li>
                                                                        <div class="labelTitleFaq">
                                                                            <apex:commandLink action="{!displayContentArticle}" value="{!article.Title}" reRender="pnlFaq">
                                                                                <apex:param name="curArticle" assignTo="{!knowledgeId}" value="{!article.KnowledgeArticleId}"/>
                                                                            </apex:commandLink>
                                                                        </div>
                                                                        <div class="teaserFaq">
                                                                            <apex:outputText value="{!article.Summary}" escape="false"/>
                                                                        </div>
                                                                    </li>
                                                                </apex:repeat> -->
                                                            </ul>
                                                        </apex:outputPanel>
                                                        <!-- Article Details  -->
                                                        <apex:pagemessages />
                                                        <apex:outputPanel rendered="{!isArticleDetail}">
                                                            <apex:commandLink action="{!goBack}" value="" reRender="pnlFaq">
                                                                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Back
                                                            </apex:commandLink>
                                                                            
                                                            <div class="articleTitle"><h2>{!articleSelected['Title']}</h2></div>
                                                            <ul class="list_laq">
                                                                <li>
                                                                    <div class="teaserFaq">
                                                                        <apex:outputText value="{!articleSelected['Description__c']}" escape="false"/>
                                                                    </div>
                                                                </li>
                                                            </ul>
                                                        </apex:outputPanel>
                                                    </div>
                                                </apex:outputPanel>
                                                
                                                <!-- Search result -->
                                                <apex:outputPanel rendered="{!isSearch}">
                                                    <div class="faqContent">
                                                        <apex:commandLink action="{!goBack}" value="" reRender="pnlFaq">
                                                                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Back
                                                        </apex:commandLink>
                                                        <ul class="list_laq">
                                                            <li>
                                                                <div class="titleFaq">Search Results for:<span class="text_search">"{!searchTxt}"</span></div>
                                                            </li>
                                                            <apex:repeat value="{!lstDisplayKnowLegde}" var="itemRec">
                                                                <li>
                                                                    <div class="labelTitleFaq">
                                                                        <apex:commandLink action="{!displayContentArticle}" value="{!itemRec.knowlegdeArtical.Title}" reRender="pnlFaq">
                                                                            <apex:param name="curArticle" assignTo="{!knowledgeId}" value="{!itemRec.knowlegdeArtical.UrlName}"/>
                                                                        </apex:commandLink>
                                                                    </div>
                                                                    <div class="teaserFaq">
                                                                        {!itemRec.knowlegdeArtical.Summary}
                                                                    </div>
                                                                </li>
                                                            </apex:repeat>
                                                        </ul>
                                                        
                                                        <div class="wrapPaginationAction">
                                                            <span class="prevNextLinks">
                                                                <span class="prevNextLeft">
                                                                    <apex:commandButton value="Previous" action="{!goPreviousPageFaq}" styleClass="previousButton" rendered="{!currentIndexPage != 1}" rerender="pnlFaq"/>
                                                                </span>
                                                                
                                                                <apex:repeat value="{!lstOfPage}" var="item">
                                                                    <apex:commandButton value="{!item}" action="{!goToPageFaq}" styleClass="{!IF(currentIndexPage == item, 'activePageNum', 'pageNum')}" disabled="{!currentIndexPage == item}" rerender="pnlFaq">
                                                                        <apex:param name="currentPIndexPage" value="{!item}" assignTo="{!currentIndexPage}"/>
                                                                    </apex:commandButton>
                                                                </apex:repeat>
                                                                
                                                                &nbsp;&nbsp;&nbsp;
                                                                <span class="prevNext">
                                                                    <apex:commandButton value="Next" action="{!goNextPageFaq}" styleClass="nextButton" rendered="{!hasNext}" rerender="pnlFaq"/>
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                </apex:outputPanel>
                                            </div>
                                            <div class="faq_col_right">
                                                <div class="faqContent">
                                                    <h2>Top 10 FAQs</h2>
                                                    <ul class="list_laq topFaq">
                                                        <knowledge:articleList articleVar="article"
                                                             articleTypes="FAQ__kav"
                                                             categories="Public_KB:FAQs"
                                                             sortBy="mostViewed"
                                                             pageSize="10">
                                                             <li>
<!--                                                                 <a href="{!SitePrefix}/apex/P2P_MySupport?article={!article.UrlName}&id={!currentAccountId}">{!article.Title}</a><br/> -->
																	
																	<a href="{!URLFOR($Page.P2P_MySupport)}?article={!article.UrlName}">{!article.Title}</a><br/>
                                                             </li>
                                                        </knowledge:articleList>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        </apex:form>
                                    </div>
                                    <!--- Contact tab --->
                                    <div role="tabpanel" class="tab-pane" id="contact">
                                    <apex:outputPanel id="contactPanel">
                                        <div class="wrapBtnTop noPadding">
                                            <div class="col-md-4 firstCol">
                                                <h2 style="margin-bottom: 0;">Contact us 7 days a week</h2>
                                                <span class="iMarginTop"><span class="iBold">90%</span> of issues are solved using our<br/><span class="iBold">24/7 Live chat</span></span> 
                                            </div>
                                            <div class="col-md-4 secondCol activeMargin">
                                                <div class="iBold iLabel">Live Chat:</div>
                                                <!-- CPN: ADDED CODE -->
                                                <style>
                                                    .overlayDialog {
                                                        position: fixed;
                                                        display: none;
                                                        visibility: hidden;
                                                        z-index: 50101;
                                                        top: 40px;
                                                        left: 150px;
                                                    }
                                                    
                                                    .overlayDialog .topRight{
                                                        background: url('/img/alohaSkin/overlay_crns.png') right top no-repeat;
                                                        padding-left: 0;
                                                        padding-right: 6px;
                                                    }
                                                    
                                                    .overlayDialog .btn{
                                                        color: #333;
                                                        margin: 1px;
                                                        padding: 3px 6px !important;
                                                        border: 1px solid #b5b5b5;
                                                        border-bottom-color: #7f7f7f;
                                                        background: #e8e8e9 url('/img/alohaSkin/btn_sprite.png') repeat-x right top;
                                                        font-weight: bold;
                                                        font-size: .9em;
                                                        -moz-border-radius: 3px;
                                                        -webkit-border-radius: 3px;
                                                        border-radius: 3px;
                                                        padding: 4px 3px;
                                                    }
                                                    
                                                    .overlayDialog .topLeft{
                                                        padding: 8px 6px 8px 12px;
                                                        background: url('/img/alohaSkin/overlayTopLft.png') left top no-repeat;
                                                    }
                                                    .overlayDialog .topLeft h2{
                                                        color: #000;
                                                        font-size: 18px;
                                                        margin-top: 0;
                                                        margin-bottom: 0;
                                                    }
                                                    .overlayDialog .middle{
                                                        background: #fff url('/img/alohaSkin/overlay_crns.png') left -240px repeat-x;
                                                        border: none;
                                                        padding: 10px 12px;
                                                        font-size: 13px;
                                                        margin-top: 0;
                                                        float: left;
                                                        width: 100%;
                                                    }
                                                    .overlayDialog .bottomRight {
                                                        background: url("/img/alohaSkin/overlay_crns.png") no-repeat scroll right -235px transparent;
                                                        height: 4px;
                                                        padding-left: 0;
                                                        padding-right: 6px;
                                                    }
                                                    .dialogClose{
                                                        background: transparent url('/img/alohaSkin/closeX.png') no-repeat;
                                                        width: 20px;
                                                        height: 20px;
                                                        float: right;
                                                        cursor: pointer;
                                                        background-position: top left;
                                                        text-indent: -999em;
                                                        overflow: hidden;
                                                    }
                                                    .overlayBackground{
                                                        background-color: #000;
                                                        border: none;
                                                        opacity: .6;
                                                        position: absolute;
                                                        top: 0;
                                                        left: 0;
                                                        z-index: 50100;
                                                        width: 100%; 
                                                        height: 1200px;
                                                    }
                                                    .checkImageUpload{
                                                        width: 22px;
                                                        height: 22px;
                                                    }
                                                    a{
                                                        cursor:pointer;
                                                    }
                                                    
                                                </style>
                                                <script>
                                                    function openPopupChatteam(ele, requireSize, functionName){
                                                        $('#popupChatteam').modal('show');
                                                    }
                                                </script>
                                                <!-- END ADDED CODE -->
                                                
                                                <span class="btnOrange setLeft inputFullWidth btnLiveChat" onclick="openPopupChatteam();"><i class="paddingBtn fa fa-comment"></i> Open live chat</span>
                                            </div>
                                            <div class="col-md-4 thirdCol activeMargin">
                                                <div class="iBold iLabel">Phone:</div>
                                                <div class="wrapPhone">
                                                    <span class="phoneNumber">0208 <span>605 </span><span>3302</span></span>
                                                    <span class="timeToContact">9:00am - 6:00pm</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <apex:form >
                                        <div class="wrapBtnTop noPadding spacingTop iRadius">
                                            <div class="col-md-4 firstCol">
                                                <div><h2 style="margin-bottom: 0;">Create a new case</h2></div>
                                                <span class="iMarginTop">Search the <a onclick="window.location='{!URLFOR($Page.P2P_MySupport)}';return false;">FAQ</a> to see if your question has already been answered.</span> 
                                            </div>
                                            <div class="col-md-4 secondCol activeMargin">
                                                <div class="iBold iLabel">Case type*:</div>
                                                <div class="wrapSelect">
                                                    <apex:actionRegion immediate="true">
                                                        <apex:actionStatus id="refreshTopicStatus">
                                                            <apex:facet name="start">
                                                                <img style="padding: 15px 10px;" src="/img/loading.gif" />
                                                            </apex:facet>
                                                            <apex:facet name="stop">
                                                                <apex:SelectList required="true" id="caseType" value="{!selType}" size="1" styleclass="iMarginTop caseType">
                                                                    <apex:selectOptions value="{!lcaseTypeOptions}"/>
                                                                    <apex:actionSupport event="onchange" action="{!caseTypeChange}" reRender="topicPanel" status="refreshTopicStatus"/>
                                                                </apex:SelectList>
                                                            </apex:facet>
                                                        </apex:actionStatus>
                                                    </apex:actionRegion>
                                                </div>
                                            </div>
                                            
                                            <apex:outputPanel id="topicPanel">
                                            <div class="col-md-4 thirdCol activeMargin">
                                                <div class="iBold iLabel">Select a topic*:</div>
                                                <div class="wrapSelect">
                                                    <apex:actionRegion immediate="true">
                                                        <!--<apex:SelectList required="true" id="topic" styleclass="iMarginTop topic" value="{!caseTopic}" size="1">
                                                            <apex:selectOptions value="{!lcaseTopicOptions}"/>
                                                        </apex:SelectList>-->
                                                        <apex:inputField value="{!newCase.Web2Case_Reason__c}" required="true" styleclass="iMarginTop topic" />
                                                        
                                                        <apex:actionStatus id="goNewCaseStatus">
                                                            <apex:facet name="start">
                                                                <img style="padding: 15px 10px;" src="/img/loading.gif" />
                                                            </apex:facet>
                                                            <apex:facet name="stop">
                                                                <apex:outputPanel >
                                                                    <span class="btnOrange btnGo" onclick="createCase();">Go</span>
                                                                    <apex:actionFunction status="goNewCaseStatus" name="createCase" action="{!createNewCase}" rerender="contactPanel"/>
                                                                </apex:outputPanel>
                                                            </apex:facet>
                                                        </apex:actionStatus>
                                                    </apex:actionRegion>
                                                </div>
                                            </div>
                                            </apex:outputPanel>
                                            
                                            <!-- Case Detail Section -->
                                            <apex:outputText rendered="{!inputNewCaseDetails}">
                                            <div class="wrapCreateYourQuestion">
                                                <div class="seperateCreateQuestion"></div>
                                                <div class="col-md-6 col-sm-6 col-xs-6 iClear">
                                                    <apex:actionRegion immediate="true">
                                                        <apex:outputText rendered="{!OR(caseTopic == 'Question about my free ad',caseTopic == 'Question about my paid ad', caseTopic == 'Report Fraud/Scam/Abuse', selType=='2 - Finance Support')}">
                                                            <div class="iBold iMarginTop iLabel">Subject*:</div>
                                                            <div class="wrapComponent effectSelectFullWidth">
                                                                <apex:actionStatus id="statusSubReason">
                                                                        <apex:facet name="start">
                                                                            <apex:outputPanel >
                                                                                <img style="padding: 15px 10px;" src="/img/loading.gif" />
                                                                            </apex:outputPanel>
                                                                        </apex:facet>
                                                                        <apex:facet name="stop">
                                                                            <apex:outputPanel id="subReason">
                                                                                <apex:inputField required="true" styleclass="iMarginTop" value="{!newCase.Web2Case_SubReason__c}">
                                                                                    <apex:actionSupport rendered="{!OR(caseTopic == 'Report Fraud/Scam/Abuse', caseTopic=='Question about my invoice')}" status="statusSubReason" event="onchange" rerender="subReason, answerFields, questionField, invoiceNum" />
                                                                                </apex:inputField>
                                                                            </apex:outputPanel>
                                                                        </apex:facet>
                                                                </apex:actionStatus>
                                                            </div>
                                                        </apex:outputText>
                                                        <apex:outputPanel id="answerFields">
                                                            <apex:outputText rendered="{!caseTopic == 'Report Fraud/Scam/Abuse'}">
                                                                <div class="iBold iMarginTop iLabel">Are you a victim of fraud?:</div>
                                                                <div class="wrapComponent effectSelectFullWidth">
                                                                    <apex:actionStatus id="statusAnswer">
                                                                        <apex:facet name="start">
                                                                            <apex:outputPanel >
                                                                                <img style="padding: 15px 10px;" src="/img/loading.gif" />
                                                                            </apex:outputPanel>
                                                                        </apex:facet>
                                                                        <apex:facet name="stop">
                                                                            <apex:outputPanel >
                                                                                <apex:outputPanel id="answer">
                                                                                    <apex:selectList value="{!selAnswer}" size="1">
                                                                                        <apex:actionSupport rendered="{!caseTopic = 'Report Fraud/Scam/Abuse'}" status="statusAnswer" event="onchange" rerender="subReason, answerFields, questionField"/>
                                                                                        <apex:selectOptions value="{!lcaseAnswersOptions}"/>
                                                                                    </apex:selectList>  
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                        </apex:facet>
                                                                    </apex:actionStatus>
                                                                </div>
                                                            </apex:outputText>
                                                            
                                                            <apex:outputPanel rendered="{!OR(selAnswer == 'yes', selAnswer == 'unsure')}">
                                                                <div class="iBold iMarginTop">What was the item you lost money on?:</div>
                                                                <div class="wrapComponent">
                                                                    <apex:outputPanel id="item">
                                                                        <apex:inputField value="{!newCase.Item__c}"/>
                                                                    </apex:outputPanel>
                                                                </div>
                                                                
                                                                <div class="iBold iMarginTop">How much money do you pay over so far?:</div>
                                                                <div class="wrapComponent">
                                                                    <apex:outputPanel id="aLost">
                                                                        <apex:inputField value="{!newCase.Amount_lost__c}"/>
                                                                    </apex:outputPanel>
                                                                </div>
                                                                
                                                                <div class="iBold iMarginTop">How did you pay?:</div>
                                                                <div class="wrapComponent effectSelectFullWidth">
                                                                    <apex:outputPanel id="pMethod">
                                                                        <apex:inputField value="{!newCase.Payment_Method__c}"/>
                                                                    </apex:outputPanel>
                                                                </div>
                                                                 
                                                                <div class="iBold iMarginTop">What is your postcode?:</div>
                                                                <div class="wrapComponent">
                                                                    <apex:outputPanel id="vPostcode">
                                                                        <apex:inputField value="{!newCase.Victim_Postcode__c}"/>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </apex:actionRegion>
                                                    
                                                    <!--Topic = 'Report Fraud/Scam/Abuse' && Subject = 'Ad' OR Subject = 'Reply' && Are you victim of Fraud = 'Yes' OR Fraud = 'Unsure' - your question field should not display-->
                                                    <apex:outputPanel id="questionField">
                                                        <apex:outputText rendered="{!NOT(AND(caseTopic = 'Report Fraud/Scam/Abuse', OR(newCase.Web2Case_SubReason__c = 'Ad', newCase.Web2Case_SubReason__c = 'Reply'), OR(selAnswer = 'yes', selAnswer = 'unsure')))}">
                                                            <div class="iBold iMarginTop iLabel">Your Question*:</div>
                                                            <div class="wrapComponent">
                                                                <apex:outputPanel id="subject">
                                                                    <apex:inputField required="true" value="{!newCase.Subject}"/>
                                                                </apex:outputPanel>
                                                            </div>
                                                        </apex:outputText>
                                                    </apex:outputPanel>
                                                    
                                                    <!-- 2015-01-12 - Adjusted by Steve Paul to only show for specific case topics 
                                                    <apex:outputPanel rendered="{!selType=='2 - Finance Support'}">
                                                     -->
                                                    <apex:outputPanel id="invoiceNum">
                                                        <apex:outputText rendered="{!AND(caseTopic == 'Question about my invoice', newCase.Web2Case_SubReason__c != 'When will I receive my invoice')}">
                                                        <div class="iBold iMarginTop iLabel">Invoice number:</div>
                                                        <div class="wrapComponent">
                                                            <apex:outputPanel >
                                                                <apex:inputField value="{!newCase.Invoice_Number__c}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                        </apex:outputText>
                                                    </apex:outputPanel>
                                                    
                                                    <apex:outputPanel rendered="{!selType=='Customer Services'}">
                                                    <div class="iBold iMarginTop iLabel">Ad reference number:</div>
                                                    <div class="wrapComponent">
                                                        <apex:outputPanel id="AdRefNo">
                                                            <apex:inputField value="{!newCase.Posting_Reference__c}"/>
                                                        </apex:outputPanel>
                                                    </div>
                                                    </apex:outputPanel>
                                                    
                                                    <!--- 2014-12-17 - Change made by Steve Paul --->
                                                    <div class="iBold iMarginTop iLabel">Further comments*:</div>
                                                    <div class="wrapComponent">
                                                        <apex:outputPanel id="description">
                                                            <apex:inputField style="height: 180px;" styleclass="detail" required="true" value="{!newCase.Description}"/>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 col-sm-6 col-xs-6">
                                                    <div class="iBold iMarginTop iLabel">Attach a file:</div>
                                                    <span class="btnGrey uploadFile" onclick="addMoreInputFileBox('fileInputPanel','image/*,.doc,.docx,.xls,.xlsx,.pdf', contactFileInputId, contactConfirmInputId, contactResponseErrorsId);">Browse</span>
                                                    <span class="uploadInfo">
                                                        Submit a .jpg / .png / .pdf / word / excel file.<br class="hideUnder480"/>
                                                        Maximum file size 1mb
                                                    </span>
                                                    <div id="fileInputPanel" style="display:none;"></div>
                                                    <div id="fileInputPanel_Display"></div>
                                                    <!--- 2014-12-17 - Change made by Steve Paul
                                                        <div class="iBold iClear spacingLgTop">Your PC and Browser specifications:</div>
                                                        <div class="wrapComponent">
                                                            <apex:outputPanel id="pcDetails">
                                                                <apex:inputField styleclass="fullWidth" value="{!newCase.PC_Details__c}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                     --->
                                                    
                                                    <div class="wrapComponent spacingLgTop">
                                                        <apex:actionStatus id="submitNewCaseStatus">
                                                            <apex:facet name="start">
                                                                <apex:outputPanel >
                                                                    <span class="submitNewCase"><img style="padding: 20px 0px 0px 86px;" src="/img/loading.gif" /></span>
                                                                </apex:outputPanel>
                                                            </apex:facet>
                                                            <apex:facet name="stop">
                                                                <apex:outputPanel >
                                                                    <span class="btnOrange submitNewCase" onclick="submitCaseCreate();">Submit Case</span>
                                                                    <apex:actionFunction status="submitNewCaseStatus" name="submitCaseCreate" action="{!submitCase}" rerender="subReason, answer, item, aLost, pMethod, vPostcode, subject, description, pcDetails" oncomplete="sumbitFilesFromContainerToParent('fileInputPanel','{!newCase.Id}', contactFileInputId, contactConfirmInputId, contactResponseErrorsId, function(){submitListChanged();});"/>
                                                                    <apex:actionFunction status="submitNewCaseStatus" name="submitListChanged" action="{!submitListChanged}" rerender="contactPanel"/>
                                                                </apex:outputPanel>
                                                            </apex:facet>
                                                        </apex:actionStatus>
                                                        <span class="required">*Required</span>
                                                    </div>
                                                    <apex:actionStatus id="cancelNewCaseStatus">
                                                        <apex:facet name="start">
                                                            <span class="cancelCreateCase"> <img src="/img/loading.gif" style="padding: 0px 20px 0px 0px;"/></span>
                                                        </apex:facet>
                                                        <apex:facet name="stop">
                                                            <apex:outputPanel >
                                                                <span class="cancelCreateCase cancelIcon"  onclick="cancelCreateCase();">Cancel</span>
                                                                <apex:actionFunction status="cancelNewCaseStatus" immediate="true" name="cancelCreateCase" action="{!cancelCreateNewCase}" rerender="contactPanel"/>
                                                            </apex:outputPanel>
                                                        </apex:facet>
                                                    </apex:actionStatus>
                                                </div>
                                            </div>
                                            </apex:outputText>
                                        </div>
                                        </apex:form>
                                        <!-- List case-->
                                        <apex:form >
                                        <apex:actionFunction name="showDetailCase" action="{!initCaseDetails}" rerender="contactPanel">
                                            <apex:param name="pshowDetailCase" assignTo="{!detailCaseId}" value=""/>
                                        </apex:actionFunction>
                                        <apex:actionFunction status="backListCasesStatus" name="gotoListCases" immediate="true" action="{!backToListCase}" rerender="contactPanel"></apex:actionFunction>
                                        <apex:outputText rendered="{!NOT(detailCaseMode)}">
                                            <div class="wrapBtnTop noPadding spacingTop iRadius rmPaddingBottom">
                                                <apex:actionRegion >
                                                    <div class="wrapCaseSearch">
                                                        <apex:inputText value="{!searchCase}" html-placeholder="Search Cases" styleclass="searchCase"/>
                                                        <apex:actionStatus id="searchCaseStatus">
                                                            <apex:facet name="start">
                                                                <img style="padding: 10px 15px;" src="/img/loading.gif" />
                                                            </apex:facet>
                                                            <apex:facet name="stop">
                                                                <apex:outputPanel >
                                                                    <button class="btnOrange btnSearch" onclick="searchCase(); return false;">
                                                                        <i class="fa fa-search"></i>
                                                                    </button>
                                                                    <apex:actionFunction status="searchCaseStatus" name="searchCase" action="{!searchKeyWordCase}" rerender="contactPanel"/>
                                                                </apex:outputPanel>
                                                            </apex:facet>
                                                        </apex:actionStatus>
                                                    </div>
                                                    <div class="wrapCaseFilter">
                                                        <div class="wrapStatus">    
                                                            <span class="labelStatus">Status: </span>
                                                            <apex:actionStatus id="searchStatusChangedStatus">
                                                                <apex:facet name="start">
                                                                    <img style="padding: 8px 15px;" src="/img/loading.gif" />
                                                                </apex:facet>
                                                                <apex:facet name="stop">
                                                                    <apex:outputPanel >
                                                                        <apex:SelectList value="{!filterStatus}" size="1" onchange="searchCaseStatusChanged();">
                                                                            <apex:selectOptions value="{!caseStatusOptions}"/>
                                                                        </apex:SelectList>
                                                                        <apex:actionFunction status="searchStatusChangedStatus" name="searchCaseStatusChanged" action="{!loadCaseList}" rerender="contactPanel"/>
                                                                    </apex:outputPanel>
                                                                </apex:facet>
                                                            </apex:actionStatus>
                                                        </div>
                                                        <div class="wrapFilter">    
                                                            <span class="labelFilter"><span class="iBold">Filter by</span> Type: </span>
                                                            <apex:actionStatus id="searchTypeChangedStatus">
                                                                <apex:facet name="start">
                                                                    <img style="padding: 8px 15px;" src="/img/loading.gif" />
                                                                </apex:facet>
                                                                <apex:facet name="stop">
                                                                    <apex:outputPanel >
                                                                        <apex:SelectList value="{!filterType}" size="1" onchange="searchCaseTypeChanged();">
                                                                            <apex:selectOptions value="{!lcaseTypeFilterOptions}"/>
                                                                        </apex:SelectList>
                                                                        <apex:actionFunction status="searchTypeChangedStatus" name="searchCaseTypeChanged" action="{!loadCaseList}" rerender="contactPanel"/>
                                                                    </apex:outputPanel>
                                                                </apex:facet>
                                                            </apex:actionStatus>
                                                        </div>
                                                    </div>
                                                </apex:actionRegion>
                                                
                                                <apex:actionRegion >
                                                    <div class="mailListCase">
                                                        <!-- Header -->
                                                        <div class="rowListCase header">
                                                            
                                                            <div class="colListCase2">
                                                                <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col2}"></span>
                                                                <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='CaseNumber','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                    Case Number
                                                                    <apex:param name="pCaseNumber" value="CaseNumber" assignTo="{!sortByFieldCase}"/>
                                                                </apex:commandLink>
                                                            </div>
                                                            <div class="colListCase1">
                                                                <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col1}"></span>
                                                                <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='CreatedDate','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                    Opened
                                                                    <apex:param name="pDate" value="CreatedDate" assignTo="{!sortByFieldCase}"/>
                                                                </apex:commandLink>
                                                            </div>
                                                            <div class="colListCase3">
                                                                <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col3}"></span>
                                                                Question
                                                            </div>
                                                    
                                                            <!--<div class="colListCase4">
                                                                <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col4}"></span>
                                                                <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='Priority','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                    Priority
                                                                    <apex:param name="pPriority" value="Priority" assignTo="{!sortByFieldCase}"/>
                                                                </apex:commandLink>
                                                            </div>-->
                                                    
                                                            <div class="colListCase5">
                                                                <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col5}"></span>
                                                                <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='RecordType.Name','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                    Case Type
                                                                    <apex:param name="pCaseType" value="RecordType.Name" assignTo="{!sortByFieldCase}"/>
                                                                </apex:commandLink>
                                                            </div>
                                                            <div class="colListCase6">
                                                                <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col6}"></span>
                                                                <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='Origin','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                    Contact Method
                                                                    <apex:param name="pContactMethod" value="Origin" assignTo="{!sortByFieldCase}"/>
                                                                </apex:commandLink>
                                                            </div>
                                                            <div class="colListCase7">
                                                                <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col7}"></span>
                                                                <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='Status','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                    Status
                                                                    <apex:param name="pContactMethod" value="Status" assignTo="{!sortByFieldCase}"/>
                                                                </apex:commandLink>
                                                            </div>
                                                        </div>
                                                        
                                                        <!-- Data of list -->
                                                        <apex:repeat value="{!lcase}" var="csRow">
                                                        <div class="rowListCase {!IF(csRow.caseinfo.Status = SolvedCaseStatus, 'solved','')}">
                                                            
                                                            <div class="colListCase2">
                                                                <span class="iColorBlue" style="cursor: pointer;" onclick="showDetailCase('{!csRow.caseinfo.Id}');">
                                                                    <apex:outputField value="{!csRow.caseinfo.CaseNumber}"/>
                                                                </span>
                                                            </div>
                                                            <div class="colListCase1">
                                                                <apex:outputText value="{0,date,dd/MM/yyyy HH:mm}">
                                                                    <apex:param value="{!csRow.caseinfo.CreatedDate}" />
                                                                </apex:outputText>
                                                            </div>
                                                            <div class="colListCase3">
                                                                <span class="iColorBlue" style="cursor: pointer;" onclick="showDetailCase('{!csRow.caseinfo.Id}');">
                                                                    <apex:outputText rendered="{!csRow.caseinfo.Subject != null}">
                                                                        <apex:outputText value="{!csRow.caseinfo.Subject}" escape="false" />
                                                                        <!--<apex:outputText value="{!LEFT(csRow.caseinfo.Subject,64)}{!IF(LEN(csRow.caseinfo.Subject) > 64, '...','')}" escape="false"/> -->
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!csRow.caseinfo.Subject = null}">
                                                                        &nbsp;
                                                                    </apex:outputText>
                                                                </span>
                                                            </div>
                                                             
                                                         <!--<div class="colListCase4">
                                                                <apex:outputText rendered="{!AND(csRow.caseinfo.Status != SolvedCaseStatus, csRow.caseinfo.Priority = 'High')}">
                                                                    <span class="high">High</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(csRow.caseinfo.Status != SolvedCaseStatus, csRow.caseinfo.Priority = 'Medium')}">
                                                                    <span class="medium">Medium</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(csRow.caseinfo.Status != SolvedCaseStatus, csRow.caseinfo.Priority = null)}">
                                                                    <span class="">&nbsp;</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!csRow.caseinfo.Status = SolvedCaseStatus}">
                                                                    <span class="">Solved</span>
                                                                </apex:outputText>
                                                            </div> -->
                                                            <div class="colListCase5">
                                                                <apex:outputText rendered="{!OR(csRow.caseinfo.RecordType.DeveloperName = 'Customer_Services', csRow.caseinfo.RecordType.DeveloperName = 'Safety_Support')}">
                                                                    Customer
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!csRow.caseinfo.RecordType.DeveloperName = 'Finance_Support'}">
                                                                    Finance
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(csRow.caseinfo.RecordType.DeveloperName != 'Finance_Support', csRow.caseinfo.RecordType.DeveloperName != 'Customer_Services', csRow.caseinfo.RecordType.DeveloperName != 'Safety_Support')}">
                                                                    {!csRow.caseinfo.RecordType.Name}
                                                                </apex:outputText>
                                                            </div>
                                                            <div class="colListCase6">
                                                                <apex:outputText rendered="{!csRow.caseinfo.Origin = 'Phone'}">
                                                                    <span class="phone_call">Phone Call</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!csRow.caseinfo.Origin = 'Live Chat'}">
                                                                    <span class="livechat">Live Chat</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!csRow.caseinfo.Origin = 'Web'}">
                                                                    <span class="form">Form</span>
                                                                </apex:outputText>
                                                                <!--- 2014-12-17 - Change made by Steve Paul --->
                                                                <apex:outputText rendered="{!csRow.caseinfo.Origin = 'Web (PRO)'}">
                                                                    <span class="form">Form</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!csRow.caseinfo.Origin = 'Email'}">
                                                                    <span class="email">Email</span>
                                                                </apex:outputText>
                                                                <!--- 2014-12-17 - Change made by Steve Paul --->
                                                                <apex:outputText rendered="{!AND(csRow.caseinfo.Origin != null, csRow.caseinfo.Origin != 'Phone', csRow.caseinfo.Origin != 'Web', csRow.caseinfo.Origin != 'Live Chat', csRow.caseinfo.Origin != 'Email', csRow.caseinfo.Origin != 'Web (PRO)')}">
                                                                    <span><apex:outputField value="{!csRow.caseinfo.Origin}"/></span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!csRow.caseinfo.Origin = null}">
                                                                    <span>&nbsp;</span>
                                                                </apex:outputText>
                                                            </div>
                                                            
                                                            <apex:outputText rendered="{!AND(csRow.caseinfo.Status != null, csRow.caseinfo.Status = NewCaseStatus)}">
                                                                <div class="colListCase7 new"> <span class="case_status iRadiusMini">NEW</span></div>
                                                            </apex:outputText>
                                                            <apex:outputText rendered="{!AND(csRow.caseinfo.Status != null, csRow.caseinfo.Status = AwaitingFeedbackCaseStatus)}">
                                                                <div class="colListCase7 awaitingfeedback"><span class="case_status iRadiusMini">AWAITING FEEDBACK</span></div>
                                                            </apex:outputText>
                                                            <apex:outputText rendered="{!AND(csRow.caseinfo.Status != null, csRow.caseinfo.Status = WorkingCaseStatus)}">
                                                                <div class="colListCase7 working"><span class="case_status iRadiusMini">WORKING</span></div>
                                                            </apex:outputText>
                                                            <apex:outputText rendered="{!AND(csRow.caseinfo.Status != null, csRow.caseinfo.Status = SolvedCaseStatus)}">
                                                                <div class="colListCase7 solved"><span class="case_status iRadiusMini ">SOLVED</span></div>
                                                            </apex:outputText>
                                                            <apex:outputText rendered="{!AND(csRow.caseinfo.Status != null, csRow.caseinfo.Status != NewCaseStatus, csRow.caseinfo.Status != SolvedCaseStatus, csRow.caseinfo.Status != WorkingCaseStatus, csRow.caseinfo.Status != AwaitingFeedbackCaseStatus)}">
                                                                <div class="colListCase7"><span class="case_status iRadiusMini "><apex:outputField value="{!csRow.caseinfo.Status}"/></span></div>
                                                            </apex:outputText>
                                                            <apex:outputText rendered="{!csRow.caseinfo.Status = null}"><div class="colListCase7">&nbsp;</div></apex:outputText>
                                                            
                                                            <!-- Click here to toggle more item -->
                                                            <div class="pc_last_col inActive">&nbsp;</div>
                                                            <!-- More item -->
                                                            <div class="pc_more_item">
                                                                
                                                                 <div class="pcTitleItem clc5 iHiden">
                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col1}"></span>
                                                                    <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='CreatedDate','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                        Opened
                                                                        <apex:param name="pDate" value="CreatedDate" assignTo="{!sortByFieldCase}"/>
                                                                    </apex:commandLink>
                                                                </div>
                                                                <div class="pcValueItem clc5 iHiden">
                                                                    <apex:outputText value="{0,date,dd/MM/yyyy HH:mm}">
                                                                        <apex:param value="{!csRow.caseinfo.CreatedDate}" />
                                                                    </apex:outputText>
                                                                </div>
                                                            
                                                                <div class="pcTitleItem clc1 iHiden">
                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col3}"></span>
                                                                    Question
                                                                </div>
                                                                <div class="pcValueItem clc1 iHiden">
                                                                    <span class="iColorBlue" style="cursor: pointer;" onclick="showDetailCase('{!csRow.caseinfo.Id}');">
                                                                        <apex:outputText rendered="{!csRow.caseinfo.Subject != null}">
                                                                            <apex:outputText value="{!csRow.caseinfo.Subject}" escape="false" />
                                                                            <!-- <apex:outputText value="{!LEFT(csRow.caseinfo.Subject,64)}{!IF(LEN(csRow.caseinfo.Subject) > 64, '...','')}" escape="false"/> -->
                                                                        </apex:outputText>
                                                                        <apex:outputText rendered="{!csRow.caseinfo.Subject = null}">
                                                                            &nbsp;
                                                                        </apex:outputText>
                                                                    </span>
                                                                </div>
                            
                                                               <!--<div class="pcTitleItem clc2 iHiden">
                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col4}"></span>
                                                                    <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='Priority','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                        Priority
                                                                        <apex:param name="pPriority" value="Priority" assignTo="{!sortByFieldCase}"/>
                                                                    </apex:commandLink>
                                                                </div>

                                                                <div class="pcValueItem clc2 iHiden">
                                                                    <apex:outputText rendered="{!AND(csRow.caseinfo.Status != SolvedCaseStatus, csRow.caseinfo.Priority = 'High')}">
                                                                        <span class="high">High</span>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!AND(csRow.caseinfo.Status != SolvedCaseStatus, csRow.caseinfo.Priority = 'Medium')}">
                                                                        <span class="medium">Medium</span>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!AND(csRow.caseinfo.Status != SolvedCaseStatus, csRow.caseinfo.Priority = null)}">
                                                                        <span class="">&nbsp;</span>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!csRow.caseinfo.Status = SolvedCaseStatus}">
                                                                        <span class="">Solved</span>
                                                                    </apex:outputText>
                                                                </div>-->
                                                                 <div class="pcTitleItem clc3 iHiden">
                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col5}"></span>
                                                                    <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='RecordType.Name','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                        Case Type
                                                                        <apex:param name="pCaseType" value="RecordType.Name" assignTo="{!sortByFieldCase}"/>
                                                                    </apex:commandLink>
                                                                </div>
                                                                <div class="pcValueItem clc3 iHiden">
                                                                    <apex:outputText rendered="{!OR(csRow.caseinfo.RecordType.DeveloperName = 'Customer_Services', csRow.caseinfo.RecordType.DeveloperName = 'Safety_Support')}">
                                                                        Customer
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!csRow.caseinfo.RecordType.DeveloperName = 'Finance_Support'}">
                                                                        Finance
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!AND(csRow.caseinfo.RecordType.DeveloperName != 'Finance_Support', csRow.caseinfo.RecordType.DeveloperName != 'Customer_Services', csRow.caseinfo.RecordType.DeveloperName != 'Safety_Support')}">
                                                                        {!csRow.caseinfo.RecordType.Name}
                                                                    </apex:outputText>
                                                                </div>
                                                                 <div class="pcTitleItem clc4 iHiden">
                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col6}"></span>
                                                                    <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='Origin','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                        <span class="hideUnder450">Contact </span>Method
                                                                        <apex:param name="pContactMethod" value="Origin" assignTo="{!sortByFieldCase}"/>
                                                                    </apex:commandLink>
                                                                </div>
                                                                <div class="pcValueItem clc4 iHiden">
                                                                    <apex:outputText rendered="{!csRow.caseinfo.Origin = 'Phone'}">
                                                                        <span class="phone_call">Phone Call</span>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!csRow.caseinfo.Origin = 'Live Chat'}">
                                                                        <span class="livechat">Live Chat</span>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!csRow.caseinfo.Origin = 'Web'}">
                                                                        <span class="form">Form</span>
                                                                    </apex:outputText>
                                                                    <!--- 2014-12-17 - Change made by Steve Paul --->
                                                                    <apex:outputText rendered="{!csRow.caseinfo.Origin = 'Web (PRO)'}">
                                                                        <span class="form">Form</span>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!csRow.caseinfo.Origin = 'Email'}">
                                                                        <span class="email">Email</span>
                                                                    </apex:outputText>
                                                                    <!--- 2014-12-17 - Change made by Steve Paul --->
                                                                    <apex:outputText rendered="{!AND(csRow.caseinfo.Origin != null, csRow.caseinfo.Origin != 'Phone', csRow.caseinfo.Origin != 'Web', csRow.caseinfo.Origin != 'Live Chat', csRow.caseinfo.Origin != 'Email', csRow.caseinfo.Origin != 'Web (PRO)')}">
                                                                        <span><apex:outputField value="{!csRow.caseinfo.Origin}"/></span>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!csRow.caseinfo.Origin = null}">
                                                                        <span>&nbsp;</span>
                                                                    </apex:outputText>
                                                                </div>
                                                                
                                                                <!--
                                                                <div class="pcTitleItem clc5 iHiden">
                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col7}"></span>
                                                                    <apex:commandLink action="{!sortCase}" reRender="contactPanel" status="" styleClass="{!IF(sortByFieldCase!='Status','headSort',(IF(isDESCCase==true,'headSortDESC','headSortASC')))}">
                                                                        Status
                                                                        <apex:param name="pContactMethod" value="Status" assignTo="{!sortByFieldCase}"/>
                                                                    </apex:commandLink>
                                                                </div>
                                                                <div class="pcValueItem clc5 iHiden">
                                                                    <apex:outputText rendered="{!AND(csRow.caseinfo.Status != null, csRow.caseinfo.Status = NewCaseStatus)}">
                                                                        <div class="new"> <span class="case_status iRadiusMini">NEW</span></div>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!AND(csRow.caseinfo.Status != null, csRow.caseinfo.Status = AwaitingFeedbackCaseStatus)}">
                                                                        <div class="awaitingfeedback"><span class="case_status iRadiusMini">AWAITING FEEDBACK</span></div>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!AND(csRow.caseinfo.Status != null, csRow.caseinfo.Status = WorkingCaseStatus)}">
                                                                        <div class="working"><span class="case_status iRadiusMini">WORKING</span></div>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!AND(csRow.caseinfo.Status != null, csRow.caseinfo.Status = SolvedCaseStatus)}">
                                                                        <div class="solved"><span class="case_status iRadiusMini ">SOLVED</span></div>
                                                                    </apex:outputText>
                                                                    <apex:outputText rendered="{!AND(csRow.caseinfo.Status != null, csRow.caseinfo.Status != NewCaseStatus, csRow.caseinfo.Status != SolvedCaseStatus, csRow.caseinfo.Status != WorkingCaseStatus, csRow.caseinfo.Status != AwaitingFeedbackCaseStatus)}">
                                                                        <div class=""><span class="case_status iRadiusMini "><apex:outputField value="{!csRow.caseinfo.Status}"/></span></div>
                                                                    </apex:outputText>
                                                                </div> -->
                                                            </div>
                                                            <!-- End more item -->
                                                        </div>
                                                        </apex:repeat>
                                                        <script>
                                                            $('.inActive').off('click').on('click',function(){
                                                                var that = $(this);
                                                                var fadeActive = that.attr('class');
                                                                if(fadeActive.match(/open/gi)){
                                                                    that.removeClass('open');
                                                                }else{
                                                                    that.addClass('open');
                                                                }
                                                            });
                                                        </script>
                                                    </div>
                                                
                                                    <apex:actionStatus id="pagingStatusCase">
                                                        <apex:facet name="start">
                                                            <img src="/img/loading.gif" />
                                                        </apex:facet>
                                                        <apex:facet name="stop">
                                                            <apex:outputPanel >
                                                                <!-- Paging -->
                                                                <apex:outputText rendered="{!lcase.size > 0}">
                                                                <div class="listViewport" style="display:block;">
                                                                    <div class="bottomNav">
                                                                        <div class="paginator" style="padding-bottom:8px;">
                                                                            <div class="iWrapPagination">
                                                                                <div class="wrapShowPerPage">
                                                                                    <div class="invListSizeChangeCase" style="float:left;">
                                                                                        Showing : &nbsp;
                                                                                        <apex:actionStatus id="invListSizeChangeCase">
                                                                                            <apex:facet name="start">
                                                                                                <apex:outputPanel >
                                                                                                    <img src="/img/loading.gif"/>
                                                                                                    &nbsp;&nbsp;&nbsp;of
                                                                                                </apex:outputPanel>
                                                                                            </apex:facet>
                                                                                            <apex:facet name="stop">
                                                                                                <apex:outputPanel >
                                                                                                    <apex:outputPanel rendered="{!totalResultSizeCase > listSizeCase}">
                                                                                                        <apex:selectList value="{!listSizeCase}" size="1">
                                                                                                            <apex:selectOptions value="{!listSizeOptionsCase}"/>
                                                                                                            <apex:actionSupport event="onchange" action="{!loadCaseList}" reRender="contactPanel" status="invListSizeChangeCase"/>
                                                                                                        </apex:selectList>
                                                                                                        &nbsp;&nbsp;&nbsp;of
                                                                                                    </apex:outputPanel>
                                                                                                </apex:outputPanel>
                                                                                            </apex:facet>
                                                                                        </apex:actionStatus>
                                                                                        {!totalResultSizeCase} case <apex:outputText rendered="{!totalResultSizeCase>1}" value="s" />
                                                                                    </div>
                                                                                </div>
                                                                                <div class="wrapPaginationAction">
                                                                                    <span class="prevNextLinks">
                                                                                        <span class="prevNextLeft">
                                                                                            <apex:commandLink action="{!goPreviousPageCase}" rendered="{!PrevRequiredCase}" value="Previous" status="navigateStatusCase" reRender="contactPanel" styleClass="previousButton"><img src="/s.gif" class="prev" alt="Previous"/></apex:commandLink>
                                                                                        </span>
                                                                                        
                                                                                        <apex:repeat value="{!pageNumListCase}" var="pnum">
                                                                                            <apex:commandLink action="{!goToPageCase}" value="{!pnum}" status="navigateStatusCase" reRender="contactPanel" rendered="{!pageNumListCase.size>1}" styleClass="{!IF(pnum == curPageCase,'activePageNum','pageNum')}" onclick="if('{!pnum}' == '{!curPageCase}') return false;">
                                                                                                <apex:param name="ptoPage" assignTo="{!curPageCase}" value="{!pnum}"/>
                                                                                            </apex:commandLink>
                                                                                        </apex:repeat>
                                                                                        
                                                                                        &nbsp;&nbsp;&nbsp;
                                                                                        <span class="prevNext">
                                                                                            <apex:commandLink action="{!goNextPageCase}" rendered="{!NextRequiredCase}" value="Next" status="navigateStatusCase" reRender="contactPanel" styleClass="nextButton"><img src="/s.gif" class="next" alt="Next"/></apex:commandLink>
                                                                                        </span>
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="clearingBox"></div>
                                                                    </div>
                                                                </div>
                                                            </apex:outputText>
                                                                
                                                            </apex:outputPanel>
                                                        </apex:facet>
                                                    </apex:actionStatus>
                                                </apex:actionRegion>
                                            </div>
                                       </apex:outputText>
                                       <apex:outputText rendered="{!detailCaseMode}">
                                            <div class="wrapBtnTop noPadding spacingTop iRadius contactDetail">
                                                <div class="wrapContactInfo">
                                                    <apex:actionStatus id="backListCasesStatus">
                                                        <apex:facet name="start">
                                                            <span style="margin-left: 50px" class="back"><img style="vertical-align: bottom;" src="/img/loading.gif" /></span>
                                                        </apex:facet>
                                                        <apex:facet name="stop">
                                                            <apex:outputPanel >
                                                                <a onclick="gotoListCases();return false;"><span style="margin-left: 15px" class="back"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Back to all cases</span></a>
                                                            </apex:outputPanel>
                                                        </apex:facet>
                                                    </apex:actionStatus>
                                                                
                                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                                        <div class="h2_title">
                                                            Case number:&nbsp; {!detailCase.CaseNumber}
                                                        </div>
                                                        <div class="borderSeperate"></div>
                                                    </div>
                                                    <div class="wrapCaseItem">
                                                        <div class="caseItem">
                                                            <span class="caseBorder">
                                                                <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col1}"></span>
                                                                <span class="iBold iLabel removeFloat">Opened:&nbsp;</span>
                                                                <!--  <apex:outputText value="{0,date,dd/MM/yyyy}"> -->
                                                                <!--- 2014-12-28 - Change made by Steve Paul --->
                                                                <apex:outputText value="{0,date,dd/MM/yyyy HH:mm}">
                                                                    <apex:param value="{!detailCase.CreatedDate}" />
                                                                </apex:outputText>
                                                            </span>
                                                        </div>
                                                        <!--<div class="caseItem">
                                                            <span class="caseBorder"><span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col4}"></span><span class="iBold iLabel removeFloat">Priority: </span>
                                                                <apex:outputText rendered="{!AND(detailCase.Status != SolvedCaseStatus, detailCase.Priority = 'High')}">
                                                                    <span class="high">High</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(detailCase.Status != SolvedCaseStatus, detailCase.Priority = 'Medium')}">
                                                                    <span class="medium">Medium</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(detailCase.Status != SolvedCaseStatus, detailCase.Priority = null)}">
                                                                    <span class="">&nbsp;</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!detailCase.Status = SolvedCaseStatus}">
                                                                    <span class="">Solved</span>
                                                                </apex:outputText>
                                                            </span>
                                                        </div> -->
                                                        <div class="caseItem">
                                                            <span class="caseBorder"><span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col5}"></span><span class="iBold iLabel removeFloat">Case Type: </span>
                                                                <apex:outputText rendered="{!OR(detailCase.RecordType.DeveloperName = 'Customer_Services', detailCase.RecordType.DeveloperName = 'Safety_Support')}">
                                                                    Customer
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!detailCase.RecordType.DeveloperName = 'Finance_Support'}">
                                                                    Finance
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(detailCase.RecordType.DeveloperName != 'Finance_Support', detailCase.RecordType.DeveloperName != 'Customer_Services', detailCase.RecordType.DeveloperName != 'Safety_Support')}">
                                                                    {!detailCase.RecordType.Name}
                                                                </apex:outputText>
                                                            </span>
                                                        </div>
                                                        <div class="caseItem">
                                                            <span class="caseBorder"><span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col6}"></span><span class="iBold iLabel removeFloat">Contact Method: </span>
                                                                <apex:outputText rendered="{!detailCase.Origin = 'Phone'}">
                                                                    <span class="phone_call">Phone Call</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!detailCase.Origin = 'Live Chat'}">
                                                                    <span class="livechat">Live Chat</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!detailCase.Origin = 'Web'}">
                                                                    <span class="form">Form</span>
                                                                </apex:outputText>
                                                                <!--- 2014-12-17 - Change made by Steve Paul --->
                                                                <apex:outputText rendered="{!detailCase.Origin = 'Web (PRO)'}">                                                                
                                                                    <span class="form">Form</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!detailCase.Origin = 'Email'}">
                                                                    <span class="email">Email</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(detailCase.Origin != null, detailCase.Origin != 'Phone', detailCase.Origin != 'Web', detailCase.Origin != 'Live Chat', detailCase.Origin != 'Email', detailCase.Origin != 'Web (PRO)')}">
                                                                    <span><apex:outputField value="{!detailCase.Origin}"/></span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!detailCase.Origin = null}">
                                                                    <span>&nbsp;</span>
                                                                </apex:outputText>
                                                            </span>
                                                        </div>
                                                        <div class="caseItem">
                                                            <span class="caseBorder"><span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Case_Col7}"></span><span class="iBold iLabel removeFloat">Status: </span>
                                                                <apex:outputText rendered="{!AND(detailCase.Status != null, detailCase.Status = NewCaseStatus)}">
                                                                    <span class="case_new iRadiusMini">NEW</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(detailCase.Status != null, detailCase.Status = AwaitingFeedbackCaseStatus)}">
                                                                    <span class="case_awaitingfeedback iRadiusMini">AWAITING FEEDBACK</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(detailCase.Status != null, detailCase.Status = WorkingCaseStatus)}">
                                                                    <span class="case_working iRadiusMini">WORKING</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(detailCase.Status != null, detailCase.Status = SolvedCaseStatus)}">
                                                                    <span class="case_solved iRadiusMini ">SOLVED</span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!AND(detailCase.Status != null, detailCase.Status != NewCaseStatus, detailCase.Status != SolvedCaseStatus, detailCase.Status != WorkingCaseStatus, detailCase.Status != AwaitingFeedbackCaseStatus)}">
                                                                    <span class="case_status iRadiusMini "><apex:outputField value="{!detailCase.Status}"/></span>
                                                                </apex:outputText>
                                                                <apex:outputText rendered="{!detailCase.Status = null}">&nbsp;</apex:outputText>
                                                            </span>
                                                        </div>
                                                        
                                                    </div>
                                                    <div class="contactColDetailRight">
                                                        <div class="mainCaseOwner">
                                                            <div class="iBold iTitle iLabel">Case Owner:</div>
                                                            <div class="wrapCaseOwner">
                                                                <apex:outputText rendered="{!AND(infoUserCase[detailCase.OwnerId].SmallPhotoUrl != null, NOT(CONTAINS(infoUserCase[detailCase.OwnerId].SmallPhotoUrl,'/profilephoto/005/T')))}">
                                                                    <img class="ownerImage" src="{!infoUserCase[detailCase.OwnerId].SmallPhotoUrl}"/>
                                                                </apex:outputText>
                                                                <apex:image styleclass="ownerImage" value="{!URLFOR($Resource.P2P_Resources, 'img/avatar.png')}" rendered="{!OR(infoUserCase[detailCase.OwnerId].SmallPhotoUrl == null, CONTAINS(infoUserCase[detailCase.OwnerId].SmallPhotoUrl,'/profilephoto/005/T'))}" title="No Image" />
                                                                <div>
                                                                    <div class="">{!detailCase.Owner.Name}</div>
                                                                    <div class="">&nbsp;</div>
                                                                    <div class="">&nbsp;</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="mainCaseOwner">
                                                            <div class="iBold iTitle iLabel">Customer Details:</div>
                                                            <div class="wrapCaseOwner" style="min-height: 60px;">
                                                                <apex:outputText rendered="{!AND(detailCase.Contact.Profile_Photo__c != null, NOT(CONTAINS(detailCase.Contact.Profile_Photo__c,'/profilephoto/005/T')))}">
                                                                    <span class="setLocationOwnerImage">
                                                                    	<!-- <apex:outputField value="{!detailCase.Contact.Profile_Photo__c}"/> -->
                                                                    	<span><table><tr><td><img src="{!CaseContactPhoto}"/></td></tr></table></span>	
                                                                    </span>
                                                                </apex:outputText>
                                                                <apex:image styleclass="ownerImage" value="{!URLFOR($Resource.P2P_Resources, 'img/avatar.png')}" rendered="{!OR(detailCase.Contact.Profile_Photo__c == null, CONTAINS(detailCase.Contact.Profile_Photo__c,'/profilephoto/005/T'))}" title="No Image" />
                                                                <div>
                                                                    <div class="">{!detailCase.Contact.Name}</div>
                                                                    <div class=""><apex:outputField value="{!detailCase.Contact.Email}"/></div>
                                                                    <div class="">{!detailCase.Contact.Phone}</div>
                                                                    <div class="">{!detailCase.Contact.Fax}</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-sm-12 col-xs-12 showMeOnMobileSite iHiden">
                                                        <div class="borderSeperateMini"></div>
                                                    </div>
                                                    <div class="contactColDetailLeft">
                                                        <div class="wrapComment">
                                                            <apex:outputText rendered="{!AND(detailCase.Contact.Profile_Photo__c != null, NOT(CONTAINS(detailCase.Contact.Profile_Photo__c,'/profilephoto/005/T')))}">
                                                                <span class="setLocationCommentImage">
                                                                	<!-- <apex:outputField value="{!detailCase.Contact.Profile_Photo__c}" /> -->
                                                                	<span><table><tr><td><img src="{!CaseContactPhoto}"/></td></tr></table></span>	
                                                                </span>
                                                            </apex:outputText>
                                                            <apex:image styleclass="commentImage" value="{!URLFOR($Resource.P2P_Resources, 'img/avatar.png')}" rendered="{!OR(detailCase.Contact.Profile_Photo__c == null, CONTAINS(detailCase.Contact.Profile_Photo__c,'/profilephoto/005/T'))}" title="No Image" />
                                                            <div>
                                                                <span class="iBold alittleSpaceBottom">{!detailCase.Subject}</span>
                                                                <span class="commentTeaser">
                                                                    <apex:outputText escape="false" value="{!detailCase.Description}"/>
                                                                </span>
                                                            </div>
                                                            <apex:outputPanel rendered="{!attachCase.size > 0}">
                                                            <div class="mainAttachMain iRadius">
                                                                <div class="iBold removeFloat iLabel">
                                                                    Attachments :
                                                                </div>
                                                                <apex:repeat value="{!attachCase}" var="attachfile">
                                                                    <div class="wrapAttachment">
                                                                        <a href="{!SitePrefix}/servlet/servlet.FileDownload?file={!attachfile.Id}" target="_blank">
                                                                            <apex:outputText rendered="{!CONTAINS(attachfile.Name, '.xls')}">
                                                                                <img style="width:104px;height:84px;" src="{!URLFOR($Resource.P2P_ResMySupport, 'excel_icon.png')}" title="{!attachfile.Name}"/>    
                                                                            </apex:outputText>
                                                                            <apex:outputText rendered="{!CONTAINS(attachfile.Name, '.pdf')}">
                                                                                <img style="width:104px;height:84px;" src="{!URLFOR($Resource.P2P_ResMySupport, 'pdf_icon.png')}" title="{!attachfile.Name}"/>
                                                                            </apex:outputText>
                                                                            <apex:outputText rendered="{!CONTAINS(attachfile.Name, '.doc')}">
                                                                                <img style="width:104px;height:84px;" src="{!URLFOR($Resource.P2P_ResMySupport, 'word_icon.png')}" title="{!attachfile.Name}"/>
                                                                            </apex:outputText>
                                                                            <apex:outputText rendered="{!AND(NOT(CONTAINS(attachfile.Name, '.doc')), NOT(CONTAINS(attachfile.Name, '.pdf')), NOT(CONTAINS(attachfile.Name, '.xls')))}">
                                                                                <img style="width:104px;height:84px;" src="{!SitePrefix}/servlet/servlet.FileDownload?file={!attachfile.Id}" title="{!attachfile.Name}"/>
                                                                            </apex:outputText>
                                                                            <span><apex:outputText value="{!LEFT(attachfile.Name,12)}{!IF(LEN(attachfile.Name) > 12, '...','')}"/></span>
                                                                        </a>
                                                                    </div>
                                                                </apex:repeat>
                                                            </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                                        <div class="borderSeperate"></div>
                                                    </div>
                                                    <div class="col-md-12 col-sm-12 col-xs-12 spaceInRank">
                                                        <div class="mainSubmitReply">
                                                            <div class="wrapComponentLeft wrapComponent">
                                                                <div class="iBold removeFloat iLabel">Comment:</div>
                                                                <apex:inputField value="{!newComment.CommentBody}" id="commentBody" required="true" style="height:150px;"/>
                                                            </div>
                                                            <div class="wrapComponentRight wrapComponent">
                                                                <div class="iBold removeFloat iLabel">Attach a file:</div>
                                                                <span class="full-width-480 btnGrey uploadFile width200"  onclick="addMoreInputFileBox('fileInputPanelCaseDetail','image/*,.doc,.docx,.xls,.xlsx,.pdf', contactFileInputIdCaseDetail, contactConfirmInputIdCaseDetail, contactResponseErrorsIdCaseDetail);">Browse</span>
                                                                <span class="uploadInfo">
                                                                    Submit a .jpg / .png / .pdf / word / excel file.<br class="hideUnder480"/> 
                                                                    Maximum file size 1mb
                                                                </span>
                                                                <div id="fileInputPanelCaseDetail" style="display:none;"></div>
                                                                <div id="fileInputPanelCaseDetail_Display"></div>
                                                            </div>
                                                            <div class="wrapBtnReply">
                                                                <apex:actionStatus id="submitCaseCmtStatus">
                                                                    <apex:facet name="start">
                                                                        <span class="btnReply"><img style="padding: 15px 60px;" src="/img/loading.gif" /></span>
                                                                    </apex:facet>
                                                                    <apex:facet name="stop">
                                                                        <apex:outputPanel >                                                                            
                                                                            <span class="btnOrange btnReply full-width-480" onclick="submitCaseCommentCreate();">Submit Reply</span>
                                                                            <apex:actionFunction status="submitCaseCmtStatus" name="submitCaseCommentCreate" action="{!submitCaseComment}" rerender="commentBody" oncomplete="sumbitFilesFromContainerToParent('fileInputPanelCaseDetail','{!detailCaseId}', contactFileInputIdCaseDetail, contactConfirmInputIdCaseDetail, contactResponseErrorsIdCaseDetail, function(){submitListCaseCommentChanged();});"/>
                                                                            <apex:actionFunction status="submitCaseCmtStatus" name="submitListCaseCommentChanged" action="{!submitListCaseCommentChanged}" rerender="contactPanel"/>
                                                                        </apex:outputPanel>
                                                                    </apex:facet>
                                                                </apex:actionStatus>
                                                                <span class="uploadInfo" style="margin-top: 15px;">
                                                                    <apex:outputText Rendered="{!markedAsResolved}">
                                                                        The status of this case is <span class="iColorGreen">Solved</span>.
                                                                        <br/>You may not recieve a reply. <span class="iColorBlue">Re-open?</span>
                                                                    </apex:outputText>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                                        <apex:actionRegion immediate="true">
                                                            <apex:actionFunction name="markAsResolved" action="{!doMarkAsResolved}" rerender="contactPanel">
                                                                <apex:param name="pMarkResolved" value="" assignTo="{!markedAsResolvedId}"/>
                                                            </apex:actionFunction>
                                                            <script>
                                                                function markCaseCommentSolved(input, caseCmtId){
                                                                    markAsResolved(caseCmtId);
                                                                    input.src='/img/loading.gif';
                                                                }
                                                            </script>
                                                            <apex:repeat value="{!lcomment}" var="caseComment">
                                                                <div class="wrapMainComment">
                                                                    <div class="componentLeft">
                                                                        <span class="commentTeaser">
                                                                            <apex:outputText escape="false" value="{!caseComment.CommentBody}"/>
                                                                        </span>
                                                                        <apex:outputText rendered="{!AND(infoUserCase[caseComment.CreatedById].SmallPhotoUrl != null, NOT(CONTAINS(infoUserCase[caseComment.CreatedById].SmallPhotoUrl,'/profilephoto/005/T')))}">
                                                                            <img src="{!infoUserCase[caseComment.CreatedById].SmallPhotoUrl}" class="commentImage"/>
                                                                        </apex:outputText>
                                                                        <apex:image styleclass="commentImage" value="{!URLFOR($Resource.P2P_Resources, 'img/avatar.png')}" rendered="{!OR(infoUserCase[caseComment.CreatedById].SmallPhotoUrl == null, CONTAINS(infoUserCase[caseComment.CreatedById].SmallPhotoUrl,'/profilephoto/005/T'))}" title="No Image" />
                                                                    </div>
                                                                    <div class="componentRight">
                                                                        <apex:outputText rendered="{!AND(caseComment.CreatedById == detailCase.OwnerId, caseComment.Id != markedAsResolvedId)}">
                                                                            <apex:outputText rendered="{!NOT(markedAsResolved)}">
                                                                                <a href="#">
                                                                                    <img class="checkbox-unchecked" src="{!URLFOR($Resource.P2P_Resources, 'gumtree-icons/unchecked-32x32.png')}" onclick="markCaseCommentSolved(this,'{!caseComment.Id}');return false;"/>
                                                                                </a>
                                                                            </apex:outputText>
                                                                            <apex:outputText rendered="{!markedAsResolved}">
                                                                                <img class="checkbox-checked" src="{!URLFOR($Resource.P2P_Resources, 'gumtree-icons/checkbox-32x32.png')}" onclick="return false;"/>
                                                                            </apex:outputText>
                                                                            <span class="label_question">Did this solve your problem?</span>
                                                                        </apex:outputText>
                                                                        <apex:outputText rendered="{!caseComment.Id = markedAsResolvedId}">
                                                                            <img class="checkbox-checked" src="{!URLFOR($Resource.P2P_Resources, 'gumtree-icons/checkbox-32x32.png')}" />
                                                                            <span class="label_question">Marked as <span class="iColorGreen">Solved</span></span>
                                                                        </apex:outputText>
                                                                    </div>
                                                                    <span class="commentNote">
                                                                        <span class="createBy">From</span> 
                                                                        <apex:outputText rendered="{!caseComment.CreatedById == detailCase.OwnerId}">
                                                                            <span class="iColorGreen">{!infoUserCase[caseComment.CreatedById].Name}<apex:outputText value="({!infoUserCase[caseComment.CreatedById].Contact.Name})" rendered="{!NOT(ISNULL(infoUserCase[caseComment.CreatedById].Contact.Name))}"/></span> 
                                                                        </apex:outputText>
                                                                        <apex:outputText rendered="{!caseComment.CreatedById != detailCase.OwnerId}">
                                                                            <span class="iColorOrange">{!infoUserCase[caseComment.CreatedById].Name}<apex:outputText value="({!infoUserCase[caseComment.CreatedById].Contact.Name})" rendered="{!NOT(ISNULL(infoUserCase[caseComment.CreatedById].Contact.Name))}"/></span> 
                                                                        </apex:outputText>
                                                                        <span class="createBy">
                                                                            on &nbsp;
                                                                            <!--- 2014-01-09 - Change made by Steve Paul --->
                                                                            <!--- <apex:outputText value="{0,date,dd/MM/yyyy}"> --->
                                                                            <apex:outputText value="{0,date,dd/MM/yyyy HH:mm}">           
                                                                                <apex:param value="{!caseComment.CreatedDate}" />
                                                                            </apex:outputText>
                                                                        </span>
                                                                    </span>
                                                                </div>  
                                                            </apex:repeat>
                                                        </apex:actionRegion>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputText>
                                        
                                        <script>
                                          $(document).ready(function(){
                                            $('[data-toggle="tooltip"]').bind({
        mouseover : function(){
        var title = $(this).attr('title');
        var data_title = $(this).attr('data-title');
        $(this).attr('title','');
        if(!data_title){
            data_title = title;
            $(this).attr('data-title',title);
        }
        helperDialog.show($(this).get(0), data_title);
        },
        mouseout : function(){
        helperDialog.hide();
        }
            });
                                          });
                                        
                                        </script>
                                        
                                        </apex:form>
                                    </apex:outputPanel>
                                    </div>
                                    
                                    <!--  Idea tab -->
                                    <div role="tabpanel" class="tab-pane" id="ideas">
                                        
                                        <div class="wrapBtnTop noPadding rmPaddingBottom"  style="padding-top: 0; background-color: transparent;">
                                            <apex:form >
                                                <apex:outputPanel id="ideaTab">
                                                    <div class="wrapBtnTop noPadding">
                                                            <apex:outputPanel id="newIdea">
                                                            <apex:pageMessages />
                                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                                <div><h2>Have you got an idea for us?</h2></div>
                                                                <span class="iMarginTop">Welcome to the Gumtree for Business community, this is your place to post or vote on ideas to help shape our business!</span>
                                                            </div>
    
                                                            <div class="col-md-3 col-sm-3 col-xs-12" style="text-align: center;">
                                                                
                                                                <apex:actionStatus id="newIdeaStatus">
                                                                    <apex:facet name="start">
                                                                        <img style="padding: 15px 10px;" src="/img/loading.gif" />
                                                                    </apex:facet>
                                                                    <apex:facet name="stop">
                                                                        <apex:outputPanel >
                                                                            <apex:commandButton onClick="postIdea(); return false;" value="Post an idea" styleClass="btnOrange setLeft inputFullWidth btnPostIdea" rerender="newIdea" rendered="{!NOT(isPostIdea)}" />
                                                                            <apex:actionFunction status="newIdeaStatus" name="postIdea" action="{!postIdea}" rerender="newIdea" oncomplete="$('.wrapCreateYourIdea textarea').html('');" />
                                                                        </apex:outputPanel>
                                                                    </apex:facet>
                                                                </apex:actionStatus>
                                                                
                                                            </div>
                                                            
                                                            <apex:outputPanel rendered="{!isPostIdea}">
                                                                <apex:actionRegion >
                                                                    <div id="idea" class="wrapCreateYourIdea">
                                                                        <div class="seperateCreateQuestion"></div>
                                                                        <div class="col-md-8 col-sm-8 col-xs-12">
                                                                            <div class="iBold iMarginTop">Title*:</div>
                                                                            <div class="wrapComponent">
                                                                                <apex:outputPanel id="ideaTitle">
                                                                                    <apex:inputField value="{!idea.Title}" required="true" styleClass="fullWidth"/>
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                            <div class="iBold iMarginTop">Details*:</div>
                                                                            <div class="wrapComponent">
                                                                                <apex:outputPanel id="ideaDetail">
                                                                                    <apex:inputTextArea value="{!idea.Body}" required="true" rows="6" />
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-4 col-sm-4 col-xs-12">
                                                                            <div class="iBold iMarginTop">Select a category*:</div>
                                                                            <div class="wrapComponent">
                                                                                <apex:outputPanel id="ideaCategory">
                                                                                    <apex:inputField value="{!idea.Category}" required="true" styleClass="spaceTopFromLabel inputFullWidth"/>
                                                                                </apex:outputPanel>
                                                                            </div>
                                                                            <div class="iBold iMarginTop">Attach a file:</div>
                                                                            <span class="btnGrey uploadFile full-width-480" onclick="addMoreInputFileBox('fileInputPanelIdea','image/*,.doc,.docx,.xls,.xlsx,.pdf', ideaFileInputId, ideaConfirmInputId, ideaResponseErrorsId);">Browse</span>
                                                                            <span class="uploadInfo">
                                                                                Submit a .jpg / .png / .pdf / word / excel file.<br class="hideUnder480"/>
                                                                                Maximum file size 1mb
                                                                            </span>
                                                                            <div id="fileInputPanelIdea" style="display:none;"></div>
                                                                            <div id="fileInputPanelIdea_Display"></div>
                                                                        </div>
                                                                        <div class="col-md-8 col-sm-8 col-xs-12">
                                                                            <apex:actionStatus id="submitIdeaStatus">
                                                                                <apex:facet name="start">
                                                                                    <img style="padding: 15px 80px;" src="/img/loading.gif" />
                                                                                </apex:facet>
                                                                                <apex:facet name="stop">
                                                                                    <apex:outputPanel >
                                                                                        <input type="button" value="Submit Idea" onclick="submitIdeaCreate();" class="btnOrange spacingTop btnSubmitIdea full-width-480" />
                                                                                        <span class="required" style="margin-top:23px;margin-left:10px;">*Required</span>
                                                                                        <span class="cancelCreateCase cancelIcon"  onclick="cancelPostIdea();">Cancel</span>
                                                                                    </apex:outputPanel>
                                                                                </apex:facet>
                                                                            </apex:actionStatus>
                                                                            
                                                                        </div>
                                                                    </div>
                                                                </apex:actionRegion>
                                                                </apex:outputPanel>
                                                                </apex:outputPanel>
                                                        </div>
                                                    <apex:actionFunction status="submitIdeaStatus" immediate="true" name="cancelPostIdea" action="{!cancelPostIdea}" rerender="ideaTab" />
                                                    <apex:actionFunction name="submitIdeaCreate" action="{!submitIdea}" status="submitIdeaStatus" rerender="ideaTitle, ideaDetail, ideaCategory" oncomplete="sumbitFilesFromContainerToParent('fileInputPanelIdea','{!ideaAttachmentLink.Id}', ideaFileInputId, ideaConfirmInputId, ideaResponseErrorsId, function(){doSubmitListIdeaChanged();});showValidateDetails();"/>
                                                    <apex:actionFunction name="doSubmitListIdeaChanged" status="submitIdeaStatus" action="{!submitListIdeaChanged}" rerender="ideaTab"/>
                                                        
                                                    
                                                            <apex:outputPanel id="panelList" rendered="{!isShowIdeaDetail == false}">
                                                                <div class="wrapBtnTop noPadding spacingTop iRadius rmPaddingBottom">
                                                                    <apex:actionRegion >
                                                                        <div class="wrapCaseSearch">
                                                                            <apex:inputText id="textSearch" html-placeholder="Search Ideas" value="{!textSearch}" styleClass="searchCase"/>
                                                                            <apex:actionStatus id="searchIdeaStatus">
                                                                                <apex:facet name="start">
                                                                                    <img style="padding: 8px 15px;" src="/img/loading.gif" />
                                                                                </apex:facet>
                                                                                <apex:facet name="stop">
                                                                                    <apex:outputPanel >
                                                                                        <button class="btnOrange btnSearch" onclick="loadIdeaList(); return false;">
                                                                                            <i class="fa fa-search"></i>
                                                                                        </button>
                                                                                        <apex:actionFunction status="searchIdeaStatus" name="loadIdeaList" action="{!loadIdeaList}" rerender="ideaTab"/>
                                                                                    </apex:outputPanel>
                                                                                </apex:facet>
                                                                            </apex:actionStatus>
                                                                        </div>
                                                                        <div class="wrapCaseFilter">
                                                                            <div class="wrapStatus">    
                                                                                <span class="labelStatus">in: </span>
                                                                                <apex:actionStatus id="searchIdeaCategoryStatus">
                                                                                    <apex:facet name="start">
                                                                                        <img style="padding: 5px 10px;" src="/img/loading.gif" />
                                                                                    </apex:facet>
                                                                                    <apex:facet name="stop">
                                                                                        <apex:outputPanel >
                                                                                            <apex:selectList value="{!category}" onchange="loadIdeaListWithCategory();" size="1">
                                                                                                <apex:selectOptions value="{!lstCategoies}"/>
                                                                                            </apex:selectList>
                                                                                            <apex:actionFunction status="searchIdeaCategoryStatus" name="loadIdeaListWithCategory" action="{!loadIdeaList}" rerender="ideaTab"/>
                                                                                        </apex:outputPanel>
                                                                                    </apex:facet>
                                                                                </apex:actionStatus>
                                                                            </div>
                                                                            <div class="wrapFilter paddingFilter">    
                                                                                <span class="labelFilter">Filter by: </span>
                                                                                <apex:actionStatus id="searchIdeaFilterByStatus">
                                                                                    <apex:facet name="start">
                                                                                        <img style="padding: 5px 10px;" src="/img/loading.gif" />
                                                                                    </apex:facet>
                                                                                    <apex:facet name="stop">
                                                                                        <apex:outputPanel >
                                                                                            <apex:selectList value="{!status}" onchange="loadIdeaListWithStatus();" size="1">
                                                                                                <apex:selectOptions value="{!lstStatus}"/>
                                                                                            </apex:selectList>
                                                                                            <apex:actionFunction status="searchIdeaFilterByStatus" name="loadIdeaListWithStatus" action="{!loadIdeaList}" rerender="ideaTab"/>
                                                                                        </apex:outputPanel>
                                                                                    </apex:facet>
                                                                                </apex:actionStatus>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <!-- List Header of Idea -->
                                                                        <div class="ideaList">
                                                                            <!-- Header idea -->
                                                                            <div class="rowListCase header">
                                                                                <div class="ideaCol1">
                                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Idea_Date}"></span>
                                                                                    <apex:commandLink action="{!sortIdea}" reRender="ideaTab" status="" styleClass="{!IF(sortByFieldIdea!='CreatedDate','headSort',(IF(isDESCIdea==true,'headSortDESC','headSortASC')))}">
                                                                                            Date
                                                                                        <apex:param name="pDate" value="CreatedDate" assignTo="{!sortByFieldIdea}"/>
                                                                                    </apex:commandLink>
                                                                                </div>
                                                                                
                                                                                <div class="ideaCol2">
                                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Idea_Category}"></span>
                                                                                    <apex:commandLink action="{!sortIdea}" reRender="ideaTab" status="" styleClass="{!IF(sortByFieldIdea!='Category','headSort',(IF(isDESCIdea==true,'headSortDESC','headSortASC')))}">
                                                                                            Category
                                                                                        <apex:param name="pCategory" value="Category" assignTo="{!sortByFieldIdea}"/>
                                                                                    </apex:commandLink>
                                                                                    
                                                                                </div>
                                                                                
                                                                                <div class="ideaCol3">
                                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Idea_IdeaOverview}"></span>
                                                                                    Idea Overview
                                                                                </div>
                                                                                
                                                                                <div class="ideaCol4">
                                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Idea_Status}"></span>
                                                                                    <apex:commandLink action="{!sortIdea}" reRender="ideaTab" status="" styleClass="{!IF(sortByFieldIdea!='Status__c','headSort',(IF(isDESCIdea==true,'headSortDESC','headSortASC')))}">
                                                                                            Status
                                                                                        <apex:param name="pStatus" value="Status__c" assignTo="{!sortByFieldIdea}"/>
                                                                                    </apex:commandLink>
                                                                                </div>
                                                                                
                                                                                <div class="ideaCol5">
                                                                                    <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Idea_Score}"></span>
                                                                                    <apex:commandLink action="{!sortIdea}" reRender="ideaTab" status="" styleClass="{!IF(sortByFieldIdea!='VoteTotal','headSort',(IF(isDESCIdea==true,'headSortDESC','headSortASC')))}">
                                                                                            Score
                                                                                        <apex:param name="pVoteTotal" value="VoteTotal" assignTo="{!sortByFieldIdea}"/>
                                                                                    </apex:commandLink>
                                                                                </div>
                                                                                
                                                                            </div>
                                                                            
                                                                            <!-- Data idea -->
                                                                
                                                                            <apex:repeat value="{!lstDtoIdea}" var="dto">
                                                                            <div class="rowListCase">
                                                                                <div class="ideaCol1">
                                                                                    <apex:outputText value="{0,date,dd/MM/yyyy}"> 
                                                                                        <apex:param value="{!dto.idea.CreatedDate}" /> 
                                                                                    </apex:outputText>
                                                                                </div>
                                                                                
                                                                                <div class="ideaCol2">
                                                                                    <apex:outputText rendered="{!ISNULL(dto.idea.Category)}">&nbsp;</apex:outputText>
                                                                                    <apex:outputText value="{!dto.idea.Category}"/>
                                                                                </div>
                                                                                
                                                                                <div class="ideaCol3">
                                                                                    <span class="iColorBlue iBold">
                                                                                        <apex:commandLink action="{!showDetail}" value="{!dto.idea.Title}" rerender="ideaTab" >
                                                                                            <apex:param name="selected" value="{!dto.index}" assignTo="{!selectedIndex}"/>
                                                                                        </apex:commandLink>
                                                                                    </span>
                                                                                    
                                                                                    <span class="createBy">by&nbsp;<apex:outputField value="{!dto.idea.CreatorName}"/></span>
                                                                                    <span class="ideaTeaser" style="text-overflow: ellipsis;overflow: hidden;">
                                                                                        <apex:outputText value="{!dto.idea.body}" escape="false"/>
                                                                                    </span>
                                                                                    <span class="hasComment iColorBlue">
                                                                                        <apex:commandLink action="{!showDetail}" rerender="ideaTab" >
                                                                                            <apex:param name="selected" value="{!dto.index}" assignTo="{!selectedIndex}"/>
                                                                                            <apex:outputText value="{!IF(ISNULL(dto.commentCount),0, dto.commentCount)}"/> Comments
                                                                                        </apex:commandLink>
                                                                                    </span>
                                                                                </div>
                                                                                
                                                                                <div class="ideaCol4">
                                                                                    <apex:outputText rendered="{!ISNULL(dto.idea.Status__c)}">&nbsp;</apex:outputText>
                                                                                    <apex:outputText styleClass="ideaStatus iRadiusMini iBold {!IF(CONTAINS(dto.idea.Status__c,'Reviewed,'),'Reviewed',SUBSTITUTE(dto.idea.Status__c,' ','_'))}" value="{!dto.idea.Status__c}" style="margin-top:8px;" rendered="{!NOT(ISNULL(dto.idea.Status__c))}"/>
                                                                                </div>
                                                                                
                                                                                <div class="ideaCol5">
                                                                                    <c:P2P_VoteIdea dto="{!dto}" />
                                                                                </div>
                                                                                <div style="border: none;" class="pcValueItem iHiden showMeOnMobileSite inputFullWidth widthHiddenComment">
                                                                                    <span class="iColorBlue iBold">
                                                                                        <apex:commandLink action="{!showDetail}" value="{!dto.idea.Title}" rerender="ideaTab" >
                                                                                            <apex:param name="selected" value="{!dto.index}" assignTo="{!selectedIndex}"/>
                                                                                        </apex:commandLink>
                                                                                    </span>
                                                                                    
                                                                                    <span class="createBy">by&nbsp;<apex:outputField value="{!dto.idea.CreatorName}"/></span>
                                                                                    <span class="ideaTeaser" style="text-overflow: ellipsis;overflow: hidden;">
                                                                                        <apex:outputText value="{!dto.idea.body}" escape="false"/>
                                                                                    </span>
                                                                                    <span class="hasComment iColorBlue">
                                                                                        <apex:commandLink action="{!showDetail}" rerender="ideaTab" >
                                                                                            <apex:param name="selected" value="{!dto.index}" assignTo="{!selectedIndex}"/>
                                                                                            <apex:outputText value="{!IF(ISNULL(dto.commentCount),0, dto.commentCount)}"/> Comments
                                                                                        </apex:commandLink>
                                                                                    </span>
                                                                                </div>
                                                                                <!-- Click here to toggle more item -->
                                                                                <div class="pc_last_col inActive">&nbsp;</div>
                                                                                <!-- More item -->
                                                                                <div class="pc_more_item">
                                                                                    <div class="pcTitleItem ideaShow1 iHiden">
                                                                                        <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Idea_Category}"></span>
                                                                                        <apex:commandLink action="{!sortIdea}" reRender="ideaTab" status="" styleClass="{!IF(sortByFieldIdea!='Category','headSort',(IF(isDESCIdea==true,'headSortDESC','headSortASC')))}">
                                                                                                Category
                                                                                            <apex:param name="pCategory" value="Category" assignTo="{!sortByFieldIdea}"/>
                                                                                        </apex:commandLink>
                                                                                    </div>
                                                                                    <div class="pcValueItem ideaShow1 iHiden">
                                                                                        <apex:outputText rendered="{!ISNULL(dto.idea.Category)}">&nbsp;</apex:outputText>
                                                                                        <apex:outputText value="{!dto.idea.Category}"/>
                                                                                    </div>
                                                
                                                                                    
                                                                                     <div class="pcTitleItem ideaShow3 iHiden">
                                                                                        <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Idea_Status}"></span>
                                                                                        <apex:commandLink action="{!sortIdea}" reRender="ideaTab" status="" styleClass="{!IF(sortByFieldIdea!='Status__c','headSort',(IF(isDESCIdea==true,'headSortDESC','headSortASC')))}">
                                                                                                Status
                                                                                            <apex:param name="pStatus" value="Status__c" assignTo="{!sortByFieldIdea}"/>
                                                                                        </apex:commandLink>
                                                                                    </div>
                                                                                    <div class="pcValueItem ideaShow3 iHiden">
                                                                                        <apex:outputText rendered="{!ISNULL(dto.idea.Status__c)}">&nbsp;</apex:outputText>
                                                                                        <apex:outputText styleClass="ideaStatus iRadiusMini iBold {!IF(CONTAINS(dto.idea.Status__c,'Reviewed,'),'Reviewed',SUBSTITUTE(dto.idea.Status__c,' ','_'))}" value="{!dto.idea.Status__c}" style="margin-top:8px;" rendered="{!NOT(ISNULL(dto.idea.Status__c))}"/>
                                                                                    </div>
                                                                                     
                                                                                </div>
                                                                                
                                                                                <!-- End more item -->
                                                                            </div>
                                                                            </apex:repeat>   
                                                                            <script>
                                                                                $('.inActive').off('click').on('click',function(){
                                                                                    var that = $(this);
                                                                                    var fadeActive = that.attr('class');
                                                                                    if(fadeActive.match(/open/gi)){
                                                                                        that.removeClass('open');
                                                                                    }else{
                                                                                        that.addClass('open');
                                                                                    }
                                                                                });
                                                                            </script>                                   
                                                                        </div>
                                                                        <apex:actionStatus id="pagingIdea">
                                                                        <apex:facet name="start">
                                                                            <img src="/img/loading.gif" />
                                                                        </apex:facet>
                                                                        <apex:facet name="stop">
                                                                            <apex:outputPanel >
                                                                                <!-- Paging -->
                                                                                <apex:outputText rendered="{!lstDtoIdea.size > 0}">
                                                                                <div class="listViewport" style="display:block;">
                                                                                    <div class="bottomNav">
                                                                                        <div class="paginator" style="padding-bottom:8px;">
                                                                                            <div class="iWrapPagination">
                                                                                                <div class="wrapShowPerPage">
                                                                                                    <div class="invListSizeChangeIdea">
                                                                                                        <apex:actionStatus id="invListSizeChangeIdea">
                                                                                                            <apex:facet name="start">
                                                                                                                <img src="/img/loading.gif" /> 
                                                                                                            </apex:facet>
                                                                                                            <apex:facet name="stop">
                                                                                                                <apex:outputPanel >
                                                                                                                    Showing : &nbsp;
                                                                                                                    <apex:outputPanel rendered="{!totalResultSizeIdea > listSizeIdea}">
                                                                                                                        <apex:selectList value="{!listSizeIdea}" size="1">
                                                                                                                            <apex:selectOptions value="{!listSizeOptionsIdea}"/>
                                                                                                                            <apex:actionSupport event="onchange" action="{!loadIdeaList}" reRender="ideaTab" status="invListSizeChangeIdea"/>
                                                                                                                        </apex:selectList>
                                                                                                                        &nbsp;&nbsp;&nbsp;of
                                                                                                                    </apex:outputPanel>
                                                                                                                    {!totalResultSizeIdea} Idea <apex:outputText rendered="{!totalResultSizeIdea>1}" value="s" />
                                                                                                                </apex:outputPanel>
                                                                                                            </apex:facet>
                                                                                                        </apex:actionStatus>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div class="wrapPaginationAction">
                                                                                                    <span class="prevNextLinks">
                                                                                                        <span class="prevNextLeft">
                                                                                                            <apex:commandLink action="{!goPreviousPageIdea}" rendered="{!PrevRequiredIdea}" value="Previous" status="navigateStatusIdea" reRender="ideaTab" styleClass="previousButton"><img src="/s.gif" class="prev" alt="Previous"/></apex:commandLink>
                                                                                                        </span>
                                                                                                        
                                                                                                        <apex:repeat value="{!pageNumListIdea}" var="pnum">
                                                                                                            <apex:commandLink action="{!goToPageIdea}" value="{!pnum}" status="navigateStatusIdea" reRender="ideaTab" rendered="{!pageNumListIdea.size>1}" styleClass="{!IF(pnum == curPageIdea,'activePageNum','pageNum')}" onclick="if('{!pnum}' == '{!curPageIdea}') return false;">
                                                                                                                <apex:param name="ptoPage" assignTo="{!curPageIdea}" value="{!pnum}"/>
                                                                                                            </apex:commandLink>
                                                                                                        </apex:repeat>
                                                                                                        
                                                                                                        &nbsp;&nbsp;&nbsp;
                                                                                                        <span class="prevNext">
                                                                                                            <apex:commandLink action="{!goNextPageIdea}" rendered="{!NextRequiredIdea}" value="Next" status="navigateStatusIdea" reRender="ideaTab" styleClass="nextButton"><img src="/s.gif" class="next" alt="Next"/></apex:commandLink>
                                                                                                        </span>
                                                                                                    </span>
                                                                                                 </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="clearingBox"></div>
                                                                                    </div>
                                                                                </div>
                                                                            </apex:outputText>
                                                                                
                                                                            </apex:outputPanel>
                                                                        </apex:facet>
                                                                    </apex:actionStatus>
                                                                </apex:actionRegion>
                                                                </div>
                                                                
                                                                <script>
                                                                  $(document).ready(function(){
                                                                    $('[data-toggle="tooltip"]').bind({
                                mouseover : function(){
                                var title = $(this).attr('title');
                                var data_title = $(this).attr('data-title');
                                $(this).attr('title','');
                                if(!data_title){
                                    data_title = title;
                                    $(this).attr('data-title',title);
                                }
                                helperDialog.show($(this).get(0), data_title);
                                },
                                mouseout : function(){
                                helperDialog.hide();
                                }
                                    });
                                                                  });
                                                                
                                                                </script>
                                                                
                                                            </apex:outputPanel>
                                                            
                                                            
                                                            <!-- Idea details -->
                                                            
                                                            <apex:outputPanel id="ideaDetailPage" rendered="{!isShowIdeaDetail}" styleClass="wrapBtnTop noPadding spacingTop iRadius contactDetail" layout="block">
                                                                <div class="wrapContactInfo">
                                                                    <apex:actionRegion >
                                                                    <apex:actionStatus id="backToIdeaListStatus">
                                                                        <apex:facet name="start">
                                                                            <img style="padding: 15px 75px;" src="/img/loading.gif" />
                                                                        </apex:facet>
                                                                        <apex:facet name="stop">
                                                                            
                                                                            <apex:commandLink action="{!hideDetail}" status="backToIdeaListStatus" styleClass="backToIdeaList" rerender="ideaTab">
                                                                                <span style="margin-left: 15px; margin-bottom: 0;" class="back"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Back to Ideas Board</span>
                                                                            </apex:commandLink>
                                                                        </apex:facet>
                                                                    </apex:actionStatus>
                                                                    
                                                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                                                        <div class="borderSeperate"></div>
                                                                    </div>
                                                                    <div class="contactColDetailRight">
                                                                        <div class="set_width_50_percents">
                                                                            
                                                                            <p></p>
                                                                            <div class="wrapHeadLabelAbsolute">
                                                                                <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Idea_Status}"></span>
                                                                                Status
                                                                            </div>
                                                                            <apex:outputText rendered="{!ISNULL(dtoIdea.idea.Status__c)}">&nbsp;</apex:outputText>
                                                                            <apex:outputText styleClass="new_status iRadiusMini iBold {!IF(CONTAINS(dtoIdea.idea.Status__c,'Reviewed,'),'Reviewed',SUBSTITUTE(dtoIdea.idea.Status__c,' ','_'))}" value="{!dtoIdea.idea.Status__c}" style="margin-top:8px;" rendered="{!NOT(ISNULL(dtoIdea.idea.Status__c))}"/>
                                                                            
                                                                        </div>
                                                                        <div class="set_width_50_percents">
                                                                            <div class="wrapHeadLabelAbsolute">
                                                                                <span class="headerIcon" data-toggle="tooltip" title="{!$Label.P2P_Idea_Score}"></span>
                                                                                Score
                                                                            </div>
                                                                            <c:P2P_VoteIdea dto="{!dtoIdea}" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="contactColDetailLeft">
                                                                        <div class="wrapComment">
                                                                            <apex:outputText rendered="{!NOT(CONTAINS(dtoIdea.idea.CreatorSmallPhotoUrl,'/profilephoto/005/T'))}">
                                                                                <img class="commentImage" src="{!dtoIdea.idea.CreatorSmallPhotoUrl}"/>
                                                                            </apex:outputText>
                                                                            <apex:image styleclass="commentImage" value="{!URLFOR($Resource.P2P_Resources, 'img/avatar.png')}" rendered="{!CONTAINS(dtoIdea.idea.CreatorSmallPhotoUrl,'/profilephoto/005/T')}" title="No Image" />
                                                                            <div>
                                                                                <apex:outputText value="{!dtoIdea.idea.Title}" styleClass="iBold alittleSpaceBottom"/>
                                                                                <apex:outputText value="{!dtoIdea.idea.body}" escape="false" styleClass="commentTeaser"/>
                                                                                    
                                                                            </div>
                                                                            <apex:outputPanel rendered="{!lstAttachment.size > 0}">
                                                                            <div class="mainAttachMain iRadius">
                                                                                <div class="iBold">
                                                                                    Attachments :
                                                                                </div>
                                                                                <apex:repeat value="{!lstAttachment}" var="attachfile">
                                                                                    <div class="wrapAttachment">
                                                                                        <a href="{!SitePrefix}/servlet/servlet.FileDownload?file={!attachfile.Id}" target="_blank">
                                                                                            <apex:outputText rendered="{!CONTAINS(attachfile.Name, '.xls')}">
                                                                                                <img style="width:104px;height:84px;" src="{!URLFOR($Resource.P2P_ResMySupport, 'excel_icon.png')}" title="{!attachfile.Name}"/>    
                                                                                            </apex:outputText>
                                                                                            <apex:outputText rendered="{!CONTAINS(attachfile.Name, '.pdf')}">
                                                                                                <img style="width:104px;height:84px;" src="{!URLFOR($Resource.P2P_ResMySupport, 'pdf_icon.png')}" title="{!attachfile.Name}"/>
                                                                                            </apex:outputText>
                                                                                            <apex:outputText rendered="{!CONTAINS(attachfile.Name, '.doc')}">
                                                                                                <img style="width:104px;height:84px;" src="{!URLFOR($Resource.P2P_ResMySupport, 'word_icon.png')}" title="{!attachfile.Name}"/>
                                                                                            </apex:outputText>
                                                                                            <apex:outputText rendered="{!AND(NOT(CONTAINS(attachfile.Name, '.doc')), NOT(CONTAINS(attachfile.Name, '.pdf')), NOT(CONTAINS(attachfile.Name, '.xls')))}">
                                                                                                <img style="width:104px;height:84px;" src="{!SitePrefix}/servlet/servlet.FileDownload?file={!attachfile.Id}" title="{!attachfile.Name}"/>
                                                                                            </apex:outputText>
                                                                                            <span><apex:outputText value="{!LEFT(attachfile.Name,12)}{!IF(LEN(attachfile.Name) > 12, '...','')}"/></span>
                                                                                        </a>
                                                                                    </div>
                                                                                </apex:repeat>
                                                                            </div>
                                                                            
                                                                            </apex:outputPanel>
                                                                            
                                                                            <div style="width:100%">
                                                                                <span class="iColorGrey">Posted by </span> 
                                                                                <apex:outputText value="{!dtoIdea.idea.CreatorName}" /> 
                                                                                <apex:outputLabel styleClass="iColorGrey">&nbsp; on &nbsp;</apex:outputLabel>
                                                                                <apex:outputText value="{0,date,dd/MM/yyyy}" styleClass="iColorGrey">
                                                                                    <apex:param value="{!dtoIdea.idea.CreatedDate}" />
                                                                                </apex:outputText>
                                                                                <apex:outputLabel styleClass="iColorGrey">&nbsp; in &nbsp;</apex:outputLabel>
                                                                                <apex:outputText value="{!dtoIdea.idea.Category}" />
                                                                            </div> 
                                                                        </div>
                                                                        
                                                                    </div>
                                                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                                                        <div class="borderSeperate"></div>
                                                                    </div>
                                                                    <div class="col-md-12 col-sm-12 col-xs-12 spaceInRank">
                                                                        <div class="mainSubmitReply">
                                                                            <apex:outputPanel id="newComment">
                                                                                <div class="wrapComponentLeft wrapComponent">
                                                                                    <div class="iBold iLabel removeFloat">Comment:</div>
                                                                                    <apex:inputTextArea value="{!ideaComment.CommentBody}" style="overflow: hidden" rows="5" cols="6"/>
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                            <div class="wrapComponentRight wrapComponent">
                                                                                <div class="iBold iLabel removeFloat">Attach a file:</div>
                                                                                
                                                                                 <span class="btnGrey uploadFile full-width-480 width200" onclick="addMoreInputFileBox('fileInputPanelIdeaComment','image/*,.doc,.docx,.xls,.xlsx,.pdf', ideaCommentFileInputId, ideaCommentConfirmInputId, ideaCommentResponseErrorsId);">Browse</span>
                                                                                <span class="uploadInfo">Submit a .jpg / .png / .pdf / word / excel file.<br class="hideUnder480"/> Maximum file size 1mb</span>
                                                                                <div id="fileInputPanelIdeaComment" style="display:none;"></div>
                                                                                <div id="fileInputPanelIdeaComment_Display"></div>
                                                                            </div>
                                                                            
                                                                            <div class="wrapBtnReply" >
                                                                                <apex:actionStatus id="createIdeaCommentStatus">
                                                                                    <apex:facet name="start">
                                                                                        <img style="padding: 15px 80px;" src="/img/loading.gif" />
                                                                                    </apex:facet>
                                                                                    <apex:facet name="stop">
                                                                                        <apex:outputPanel >
                                                                                            <apex:commandButton onClick="createIdeaComment(); return false;" value="Submit reply"  styleClass="btnOrange btnReply full-width-480"/>
                                                                                        </apex:outputPanel>
                                                                                    </apex:facet>
                                                                                </apex:actionStatus>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                                                        <apex:outputPanel id="paneListComment">
                                                                            <apex:repeat value="{!lstIdeaComment}" var="comm">
                                                                                <div class="wrapMainComment">
                                                                                    <div class="componentLeft" style="width: 100%;">
                                                                                        <div style="text-overflow: ellipsis;overflow: hidden;">
                                                                                            <apex:outputText value="{!comm.CommentBody}" escape="false" styleClass="commentTeaser"/>
                                                                                        </div>
                                                                                        <apex:outputText rendered="{!AND(comm.CreatorSmallPhotoUrl != null, NOT(CONTAINS(comm.CreatorSmallPhotoUrl,'/profilephoto/005/T')))}">
                                                                                            <img class="commentImage" src="{!comm.CreatorSmallPhotoUrl}"/>
                                                                                        </apex:outputText>
                                                                                        <apex:image styleclass="commentImage" value="{!URLFOR($Resource.P2P_Resources, 'img/avatar.png')}" rendered="{!OR(comm.CreatorSmallPhotoUrl == null, CONTAINS(comm.CreatorSmallPhotoUrl,'/profilephoto/005/T'))}" title="No Image" />
                                                                                    </div>
                                                                                    
                                                                                    <span class="commentNote">
                                                                                        <span class="iColorGrey">Posted by </span> 
                                                                                        <apex:outputText value="{!comm.CreatorName}" /> 
                                                                                        <apex:outputLabel styleClass="iColorGrey">&nbsp; on &nbsp;</apex:outputLabel>
                                                                                        <apex:outputText value="{0,date,dd/MM/yyyy}" styleClass="iColorGrey">
                                                                                            <apex:param value="{!comm.CreatedDate}" />
                                                                                        </apex:outputText>
                                                                                    </span>
                                                                                </div> 
                                                                            </apex:repeat>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <apex:actionFunction name="createIdeaComment" action="{!createIdeaComment}" status="createIdeaCommentStatus" oncomplete="sumbitFilesFromContainerToParent('fileInputPanelIdeaComment','{!ideaAttachmentLink.Id}', ideaCommentFileInputId, ideaCommentConfirmInputId, ideaCommentResponseErrorsId, function(){doSubmitListIdeaCommentChanged();});"/>
                                                                    <apex:actionFunction name="doSubmitListIdeaCommentChanged" action="{!submitListIdeaCommentChanged}" status="createIdeaCommentStatus" rerender="ideaTab"/>
                                                                    </apex:actionRegion>
                                                                </div>
                                                                <script>
                                                                     $('[data-toggle="tooltip"]').bind({
                                mouseover : function(){
                                var title = $(this).attr('title');
                                var data_title = $(this).attr('data-title');
                                $(this).attr('title','');
                                if(!data_title){
                                    data_title = title;
                                    $(this).attr('data-title',title);
                                }
                                helperDialog.show($(this).get(0), data_title);
                                },
                                mouseout : function(){
                                helperDialog.hide();
                                }
                                    });
                                                                 </script>
                                                           </apex:outputPanel>
                                                    </apex:outputPanel> 
                                                    
                                                </apex:form>
                                            </div>
                                        </div>
                                    <!-- End Idea Page -->

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <script>
                    //check select subject rendered Invoice Number field
                    function renderInvoiceNumberField(selectEle, invNumEle){
                        console.log('sada');
                        var isDisplay = selectEle.value == 'When will I receive my invoice';
                        document.getElementById(invNumEle).style.display = isDisplay ? 'none' : '';
                    }
                    function showValidateDetails(){
                        var textAreaEle = $('.wrapCreateYourIdea textarea');
                        
                        textAreaEle.parent().find('.errorMsg').remove();
                        textAreaEle.removeClass('error');
                        if(textAreaEle.val().trim() == ''){
                            var errBlock = $("<div class='errorMsg'><strong>Error: </strong>You must enter a value</div>");
                            textAreaEle.parent().append(errBlock);
                            textAreaEle.toggleClass('error');
                        }
                    }
                    
                    $(document).ready(function(){
                        $.browser.safari = ($.browser.webkit && !(/chrome/.test(navigator.userAgent.toLowerCase())));
                        if ($.browser.safari) {
                            $('.container').addClass('isSafari');
                        }
                        var tab = 0;
                        $('#myTab a').eq(tab).tab('show');
                    });
                
                </script>
                
                <script type="text/javascript">
                    setTimeout(function(){var a=document.createElement("script");
                    var b=document.getElementsByTagName("script")[0];
                    a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0012/7064.js?"+Math.floor(new Date().getTime()/3600000);
                    a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
                </script>
                
          </body>
          
          </apex:define>
      </apex:composition>
              
          
  </html>
</apex:page>